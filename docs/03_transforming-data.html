<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Science for Psychologists - 3&nbsp; Transforming Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04_tidying-and-merging-data.html" rel="next">
<link href="./02_creating-graphs.html" rel="prev">
<link href="./cover.png" rel="icon" type="image/png">
<script src="site_libs/cookie-consent/cookie-consent.js"></script>
<link href="site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9LJ4BCBCE0"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9LJ4BCBCE0', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"express",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":"",
"website_privacy_policy_url":"https://glennwilliams.me/#privacy-policy"
  });
});
</script> 
  

<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<meta property="og:title" content="Data Science for Psychologists - 3&nbsp; Transforming Data">
<meta property="og:description" content="Getting data in the correct format for data visualisation and statistical analysis encompasses a large part of the data analysis pipeline.">
<meta property="og:site-name" content="Data Science for Psychologists">
<meta name="twitter:title" content="Data Science for Psychologists - 3&nbsp; Transforming Data">
<meta name="twitter:description" content="Getting data in the correct format for data visualisation and statistical analysis encompasses a large part of the data analysis pipeline.">
<meta name="twitter:image" content="http://glennwilliams.me/ds-psych/docs/cover.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:image-height" content="600">
<meta name="twitter:image-width" content="518">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Transforming Data</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Science for Psychologists</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./00a_part-core.html" class="sidebar-item-text sidebar-link">Core</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_getting-started.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting Started</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_creating-graphs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Creating Graphs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_transforming-data.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Transforming Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_tidying-and-merging-data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Tidying and Merging Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_core-statistics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Core Statistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_open-science-practices.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Open Science Practices</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./00b_part-advanced.html" class="sidebar-item-text sidebar-link">Advanced</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_multilevel-modelling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Multilevel Modelling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_data-simulation-and-power.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Data Simulation and Power</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_bayesian-estimation-and-model-comparison.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Bayesian Estimation and Model Comparison</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_understanding-null-results.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Understanding Null Results</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99a_installing-r.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Installing R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99b_installing-rstudio.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Installing RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99c_installing-quarto.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Installing Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99d_installing-bayesian-software.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Installing Bayesian Software</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99e_installing-r-packages.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Installing R Packages</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#reading-data" id="toc-reading-data" class="nav-link active" data-scroll-target="#reading-data"><span class="toc-section-number">3.1</span>  Reading Data</a>
  <ul class="collapse">
  <li><a href="#reading-data-into-r-from-an-external-source" id="toc-reading-data-into-r-from-an-external-source" class="nav-link" data-scroll-target="#reading-data-into-r-from-an-external-source"><span class="toc-section-number">3.1.1</span>  Reading Data into R from an External Source</a></li>
  <li><a href="#inspecting-your-data" id="toc-inspecting-your-data" class="nav-link" data-scroll-target="#inspecting-your-data"><span class="toc-section-number">3.1.2</span>  Inspecting Your Data</a></li>
  </ul></li>
  <li><a href="#a-note-on-pipes" id="toc-a-note-on-pipes" class="nav-link" data-scroll-target="#a-note-on-pipes"><span class="toc-section-number">3.2</span>  A Note on Pipes</a></li>
  <li><a href="#separating-columns" id="toc-separating-columns" class="nav-link" data-scroll-target="#separating-columns"><span class="toc-section-number">3.3</span>  Separating Columns</a></li>
  <li><a href="#selecting-columns" id="toc-selecting-columns" class="nav-link" data-scroll-target="#selecting-columns"><span class="toc-section-number">3.4</span>  Selecting Columns</a>
  <ul class="collapse">
  <li><a href="#selecting-columns-to-keep" id="toc-selecting-columns-to-keep" class="nav-link" data-scroll-target="#selecting-columns-to-keep"><span class="toc-section-number">3.4.1</span>  Selecting Columns to Keep</a></li>
  <li><a href="#selecting-columns-to-remove" id="toc-selecting-columns-to-remove" class="nav-link" data-scroll-target="#selecting-columns-to-remove"><span class="toc-section-number">3.4.2</span>  Selecting Columns to Remove</a></li>
  <li><a href="#select-helpers" id="toc-select-helpers" class="nav-link" data-scroll-target="#select-helpers"><span class="toc-section-number">3.4.3</span>  Select Helpers</a></li>
  </ul></li>
  <li><a href="#renaming-and-reordering-columns" id="toc-renaming-and-reordering-columns" class="nav-link" data-scroll-target="#renaming-and-reordering-columns"><span class="toc-section-number">3.5</span>  Renaming and Reordering Columns</a>
  <ul class="collapse">
  <li><a href="#renaming-columns" id="toc-renaming-columns" class="nav-link" data-scroll-target="#renaming-columns"><span class="toc-section-number">3.5.1</span>  Renaming Columns</a></li>
  <li><a href="#renaming-columns-automatically" id="toc-renaming-columns-automatically" class="nav-link" data-scroll-target="#renaming-columns-automatically"><span class="toc-section-number">3.5.2</span>  Renaming Columns Automatically</a></li>
  <li><a href="#reordering-columns" id="toc-reordering-columns" class="nav-link" data-scroll-target="#reordering-columns"><span class="toc-section-number">3.5.3</span>  Reordering Columns</a></li>
  </ul></li>
  <li><a href="#creating-and-changing-columns" id="toc-creating-and-changing-columns" class="nav-link" data-scroll-target="#creating-and-changing-columns"><span class="toc-section-number">3.6</span>  Creating and Changing Columns</a>
  <ul class="collapse">
  <li><a href="#improving-multi-column-operations" id="toc-improving-multi-column-operations" class="nav-link" data-scroll-target="#improving-multi-column-operations"><span class="toc-section-number">3.6.1</span>  Improving Multi-Column Operations</a></li>
  <li><a href="#using-conditionals" id="toc-using-conditionals" class="nav-link" data-scroll-target="#using-conditionals"><span class="toc-section-number">3.6.2</span>  Using Conditionals</a></li>
  </ul></li>
  <li><a href="#filtering-observations" id="toc-filtering-observations" class="nav-link" data-scroll-target="#filtering-observations"><span class="toc-section-number">3.7</span>  Filtering Observations</a>
  <ul class="collapse">
  <li><a href="#filtering-to-keep" id="toc-filtering-to-keep" class="nav-link" data-scroll-target="#filtering-to-keep"><span class="toc-section-number">3.7.1</span>  Filtering to Keep</a></li>
  <li><a href="#filtering-to-exclude" id="toc-filtering-to-exclude" class="nav-link" data-scroll-target="#filtering-to-exclude"><span class="toc-section-number">3.7.2</span>  Filtering to Exclude</a></li>
  <li><a href="#a-note-on-missing-values" id="toc-a-note-on-missing-values" class="nav-link" data-scroll-target="#a-note-on-missing-values"><span class="toc-section-number">3.7.3</span>  A Note on Missing Values</a></li>
  </ul></li>
  <li><a href="#arranging-data" id="toc-arranging-data" class="nav-link" data-scroll-target="#arranging-data"><span class="toc-section-number">3.8</span>  Arranging Data</a></li>
  <li><a href="#summarising-data" id="toc-summarising-data" class="nav-link" data-scroll-target="#summarising-data"><span class="toc-section-number">3.9</span>  Summarising Data</a>
  <ul class="collapse">
  <li><a href="#handling-missing-values" id="toc-handling-missing-values" class="nav-link" data-scroll-target="#handling-missing-values"><span class="toc-section-number">3.9.1</span>  Handling Missing Values</a></li>
  </ul></li>
  <li><a href="#grouped-operations" id="toc-grouped-operations" class="nav-link" data-scroll-target="#grouped-operations"><span class="toc-section-number">3.10</span>  Grouped Operations</a>
  <ul class="collapse">
  <li><a href="#group_by-with-other-dplyr-functions" id="toc-group_by-with-other-dplyr-functions" class="nav-link" data-scroll-target="#group_by-with-other-dplyr-functions"><span class="toc-section-number">3.10.1</span>  <code>group_by()</code> with other <code>dplyr</code> functions</a></li>
  <li><a href="#ungrouping" id="toc-ungrouping" class="nav-link" data-scroll-target="#ungrouping"><span class="toc-section-number">3.10.2</span>  Ungrouping</a></li>
  </ul></li>
  <li><a href="#chaining-functions" id="toc-chaining-functions" class="nav-link" data-scroll-target="#chaining-functions"><span class="toc-section-number">3.11</span>  Chaining Functions</a></li>
  <li><a href="#saving-files" id="toc-saving-files" class="nav-link" data-scroll-target="#saving-files"><span class="toc-section-number">3.12</span>  Saving Files</a></li>
  <li><a href="#sec-exercises" id="toc-sec-exercises" class="nav-link" data-scroll-target="#sec-exercises"><span class="toc-section-number">3.13</span>  Exercises</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Transforming Data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Getting data in the correct format for data visualisation and statistical analysis encompasses a large part of the data analysis pipeline. In this chapter we’ll focus on transforming data, particularly with respect to a single table of data. To do this, we will focus on the main processes involved in transforming data to reading it in from an external file, transforming the data in various ways, and then saving the data to a new, external file. We’ll cover:</p>
<ul>
<li><p>Reading in data sets using the <code>read_</code> family of functions, e.g.&nbsp;<code>read_csv()</code>.</p></li>
<li><p>Renaming columns with <code>clean_names()</code> and <code>rename()</code>.</p></li>
<li><p>Subsetting and reordering data sets with <code>select()</code>.</p></li>
<li><p>Filtering the data set to certain rows/observations with <code>filter()</code>.</p></li>
<li><p>Creating and transforming columns with <code>mutate()</code>.</p></li>
<li><p>Creating summaries of variables with <code>summarise()</code>.</p></li>
</ul>
<p>Most of these functions can be applied to subgroups of your data with <code>group_by()</code>. For example, when combined with <code>summarise()</code> we can create descriptive statistics for unique groups in our data set.</p>
<section id="reading-data" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="reading-data"><span class="header-section-number">3.1</span> Reading Data</h2>
<p>Prior to this chapter, we’ve used inbuilt data sets or created data within R to show off the functionality of R. However, in a real research context you’ll often be required to work with data from an external file. Thankfully, several packages allow us to read in and write to a wide range of files.</p>
<section id="reading-data-into-r-from-an-external-source" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="reading-data-into-r-from-an-external-source"><span class="header-section-number">3.1.1</span> Reading Data into R from an External Source</h3>
<p>The <code>readr</code> package in the <code>tidyverse</code> comes with several functions using the <code>read_*()</code> prefix. These are focused on reading in files that aren’t saved using a proprietary format. Generally, it’s a good idea to use one of these formats as you can be sure anyone, anywhere with access to a computer can work with these files. While many have access to software like Microsoft Excel, you’re still excluding those who don’t have access to this paid software if you share data in this format. For that reason, to engage properly in Open Science it’s best to use a file format like <code>.csv</code> to allow the greatest number of people to access your data. Here are the open file formats supported by <code>readr</code>:</p>
<p>The <code>readr</code> package allows you to read rectangular data into R from delimited files (e.g.&nbsp;.csv, .tsv). Here are just a few of the main functions available to you in <code>readr</code>:</p>
<ul>
<li><code>read_csv()</code>: comma-separated values (CSV).</li>
<li><code>read_tsv()</code>: tab-separated values (TSV).</li>
<li><code>read_csv2()</code>: semicolon-separated values with <code>,</code> as the decimal mark.</li>
<li><code>read_delim()</code>: delimited files (CSV and TSV are important special cases).</li>
<li><code>read_table()</code>: whitespace-separated files.</li>
</ul>
<p>Sometimes, however, working with proprietary data formats can’t be avoided. In this case, we’re not out of luck. We can use the <code>haven</code> package to read these files into R. From here, it’s good practice to save the file in an open format. <code>haven</code> gives you access to:</p>
<p>If you’re working proprietary data formats, use <code>haven</code> which has:</p>
<ul>
<li><code>read_sav()</code>: SPSS data files.</li>
<li><code>read_dta</code>: Stata data files.</li>
<li><code>read_sas()</code>: SAS data files.</li>
</ul>
<p>If working with Microsoft Excel files, you can use <code>readxl</code> which has the <code>read_excel()</code> function and others for working with older Excel file types.</p>
<p>All of these functions expect the path to your file as the input to the function. If using an RStudio Project we can specify a file path to the file in our project folder using relative file paths to increase the computational reproducibility of our reports.</p>
<p>First we need some data. <strong>I made a messy version of real data</strong> from <a href="https://osf.io/rbtms/">Dunne et al.&nbsp;(2023): Uncovering the social determinants of brain injury rehabilitation</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. This data is stored as a <strong>.csv</strong> file in <a href="https://github.com/gpwilliams/ds-psych_course" class="uri">https://github.com/gpwilliams/ds-psych_course</a>. To follow along, download the repository from GitHub and open the exercises file in <code>03_transforming-data</code> or make your own Quarto document within the folder.</p>
<section id="reading-our-data" class="level4" data-number="3.1.1.1">
<h4 data-number="3.1.1.1" class="anchored" data-anchor-id="reading-our-data"><span class="header-section-number">3.1.1.1</span> Reading Our Data</h4>
<p>Load the packages once per session. Ensure that you have already installed each package <strong>once</strong> on your computer using <code>install.packages()</code> before you try to load the packages using <code>library()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># readr, dplyr and other packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here) <span class="co"># working with file paths</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># cleaning column names</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># working with datetimes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Assuming you’re working from the <code>ds-psych_course</code> folder, read the data from the <code>data</code> sub-folder. When we assign this data to the object <code>raw_data</code> we have created a <code>tibble</code> within R that we can work with.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that when working with your data set within R this doesn’t change the external data you’ve just read in. You can only change this data if you overwrite it using one of the <code>write_*()</code> functions. Avoid doing that and you’re safe to break the data in any way and still have a recoverable copy of your data. For this reason it’s encouraged to leave your raw data untouched and only save your transformed, cleaned, or filtered data to new files.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"bi-loneliness.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 29 Columns: 45
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (32): PID, time, progress, Gender, Region, Marital Status, Living Arrang...
dbl (13): Age, BRS1, BRS2, BRS3, BRS4, BRS5, BRS6, DJG_1, DJG_2, DJG_3, DJG_...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>You will get a message telling you about the data types that have been detected for each column. Nicely, <code>readr</code> looks up each column and determines a data type for the columns. If a column contains numbers it’s saved as a double (numeric) column. If a column contains even one character, it will be read in as a character column. This can be changed manually if you need to change data types. We will look at this later in this chapter.</p>
</section>
</section>
<section id="inspecting-your-data" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="inspecting-your-data"><span class="header-section-number">3.1.2</span> Inspecting Your Data</h3>
<p>With any data set, it’s important to understand the columns. Either print it out by typing the name of the data set, here <code>raw_data</code> in the console, or print the transposed data set with <code>glimpse()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(raw_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 29
Columns: 45
$ PID                   &lt;chr&gt; "26", "27", "28", "29", "30", "A2", "A3", "C", "…
$ time                  &lt;chr&gt; "2018-03-22 23:06:11_2018-03-23 00:25:51", "2018…
$ progress              &lt;chr&gt; "FINISH", "no", "END", "ethics", "ethics", "END"…
$ Gender                &lt;chr&gt; "M", "M", "F", "M", "M", "male", "M", "M", "M", …
$ Age                   &lt;dbl&gt; 54, 54, 37, 51, 52, 39, 47, 53, 68, 50, 46, 55, …
$ Region                &lt;chr&gt; "East", "Scotland", "South East", "West Yorkshir…
$ `Marital Status`      &lt;chr&gt; "Married", "Married", "Married", "Single", "Marr…
$ `Living Arrangements` &lt;chr&gt; "With wife", "With wife", "With husband and todd…
$ `Primary Carer`       &lt;chr&gt; "None", "None", "None", "None", "Wife", "None", …
$ Employment            &lt;chr&gt; "Medically Retired", "Medically Retired", "Long …
$ `Time Since BI`       &lt;chr&gt; "6 (2015)", "3 (2018)", "5 (2016)", "23 (1998)",…
$ `BI Severity`         &lt;chr&gt; "Mild", "Severe", "Mild", "Moderate", "Severe", …
$ Vision                &lt;chr&gt; NA, NA, "X", NA, "X", "x", NA, NA, "X", NA, NA, …
$ Speech                &lt;chr&gt; "X", "X", NA, NA, NA, "x", NA, NA, "X", "X", "X"…
$ Motor                 &lt;chr&gt; NA, "X", "X", NA, NA, "x", "X", NA, "X", "X", "X…
$ Memory                &lt;chr&gt; NA, NA, NA, NA, "X", NA, "X", NA, "X", "X", NA, …
$ Cognitive             &lt;chr&gt; "X", "X", NA, NA, "X", NA, NA, "X", NA, "X", NA,…
$ Pain                  &lt;chr&gt; NA, NA, "X", NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ BRS1                  &lt;dbl&gt; 5, 4, 3, 4, 2, 5, 5, 4, 5, 5, 4, 4, 2, 4, NA, 4,…
$ BRS2                  &lt;dbl&gt; 4, 4, 2, 4, 1, 5, 5, 1, 4, 4, 2, 2, 2, 1, NA, 2,…
$ BRS3                  &lt;dbl&gt; 3, 4, 1, 4, 5, 2, 5, 4, 4, 5, 2, 2, 2, 2, NA, 5,…
$ BRS4                  &lt;dbl&gt; 4, 4, 2, 4, 2, 5, 5, 5, 4, 4, 4, 4, 2, 4, NA, 4,…
$ BRS5                  &lt;dbl&gt; 4, 2, 2, 3, 1, 4, 5, 4, 4, 3, 4, 4, 2, 2, NA, 4,…
$ BRS6                  &lt;dbl&gt; 5, 2, 1, 3, 2, 4, 5, 5, 4, 4, 2, 5, 3, 5, NA, 4,…
$ DJG_1                 &lt;dbl&gt; 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, NA, 1,…
$ DJG_2                 &lt;dbl&gt; 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, NA, 1,…
$ DJG_3                 &lt;dbl&gt; 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, NA, 1,…
$ DJG_4                 &lt;dbl&gt; 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, NA, 0,…
$ DJG_5                 &lt;dbl&gt; 0, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 0, 0, NA, 1,…
$ DJG_6                 &lt;dbl&gt; 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, NA, 0,…
$ `WEMWBS 1`            &lt;chr&gt; "2 - Rarely", "3 - Some of the time", "3 - Some …
$ `WEMWBS 2`            &lt;chr&gt; "4 - Often", "2 - Rarely", "2 - Rarely", "2 - Ra…
$ `WEMWBS 3`            &lt;chr&gt; "4 - Often", "3 - Some of the time", "2 - Rarely…
$ `WEMWBS 4`            &lt;chr&gt; "3 - Some of the time", "4 - Often", "1 - None o…
$ `WEMWBS 5`            &lt;chr&gt; "1 - None of the time", "2 - Rarely", "1 - None …
$ `WEMWBS 6`            &lt;chr&gt; "5 - All of the time", "3 - Some of the time", "…
$ `WEMWBS 7`            &lt;chr&gt; "4 - Often", "3 - Some of the time", "4 - Often"…
$ `WEMWBS 8`            &lt;chr&gt; "3 - Some of the time", "2 - Rarely", "2 - Rarel…
$ `WEMWBS 9`            &lt;chr&gt; "2 - Rarely", "3 - Some of the time", "3 - Some …
$ `WEMWBS 10`           &lt;chr&gt; "3 - Some of the time", "2 - Rarely", "2 - Rarel…
$ `WEMWBS 11`           &lt;chr&gt; "5 - All of the time", "3 - Some of the time", "…
$ `WEMWBS 12`           &lt;chr&gt; "3 - Some of the time", "3 - Some of the time", …
$ `WEMWBS 13`           &lt;chr&gt; "1 - None of the time", "2 - Rarely", "1 - None …
$ `WEMWBS 14`           &lt;chr&gt; "3 - Some of the time", "2 - Rarely", "3 - Some …
$ enjoymentFOLLOW       &lt;chr&gt; "7-no", "6-yes", "4-yes", "0-no", "4-no", "5-no"…</code></pre>
</div>
</div>
<p>That’s a lot of columns! Broadly, this data set has one row of data for each participant and tracks some of the demographics of the participants. As the data set concerns brain injury survivors, we also have information on the traumatic brain injuries of the participants, including the time since the brain injury and severity of brain injury. Along with this we have columns coding for types of impairments or disturbances as a result of brain injury (i.e.&nbsp;visual, speech, motor, memory, or cognitive, pain). Finally, we have ratings for two questionnaires, the BRS (<a href="https://pubmed.ncbi.nlm.nih.gov/18696313/">Brief Resilience Scale)</a>, DJG (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2921057/">De Jong Gierveld scale for emotional and social loneliness</a>), and WEMWBS (<a href="https://warwick.ac.uk/fac/sci/med/research/platform/wemwbs/">The Warwick-Edinburgh Mental Wellbeing Scales</a>). We also have a closing question in one column that encodes two variables: whether they enjoyed the study and if they would be contactable in a follow up. We need to fix a number of issues with this data.</p>
<p>At this stage it is a good idea to take some time to really understand our data. What are the unique values in each column? What are the issues with the presentation that might make working with the data difficult? Using plots is a good way to visually inspect each variable.</p>
<p>To follow along with these examples, you might want to subset the data to remove some columns that aren’t needed. We’ll remove the WEMWBS and BRS columns along with some demographic columns just to make the print out easier to parse. At the end of this chapter, the following code will make sense:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> raw_data <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">c</span>(<span class="fu">contains</span>(<span class="st">"WEMWBS"</span>), <span class="fu">contains</span>(<span class="st">"BRS"</span>)), </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">-</span><span class="fu">c</span>(Region<span class="sc">:</span><span class="st">`</span><span class="at">BI Severity</span><span class="st">`</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="a-note-on-pipes" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="a-note-on-pipes"><span class="header-section-number">3.2</span> A Note on Pipes</h2>
<p>In R, we can combine several functions to produce a result using nested code. For example, to get get counts of unique participant IDs we can combine the <code>unique()</code> and <code>length()</code> functions as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(raw_data<span class="sc">$</span>PID))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 26</code></pre>
</div>
</div>
<p>This is fine, but can get complicated to read as you have to read in to out. The more functions we chain together the harder it can get to read the code. Instead, we can use the pipe. This allows us to write code and read it left to right. Here’s how we might use the pipe to complete the same operation as above:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>raw_data<span class="sc">$</span>PID <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">length</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 26</code></pre>
</div>
</div>
<p>The pipe can be read as <strong>“and then”</strong>, so take our <code>PID</code> column from <code>raw_data</code> <strong>and then</strong> get the unique values <strong>and then</strong> get the length (or count) of them.</p>
<p>We will use pipes throughout this book as we now start to chain together many functions.</p>
</section>
<section id="separating-columns" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="separating-columns"><span class="header-section-number">3.3</span> Separating Columns</h2>
<p>One of the glaring issues with this data set is that we have one column, <code>enjoymentFOLLOW</code> which encodes two variables, whether people enjoyed the study and if they’d be contactable at a follow up, and <code>time</code> that encodes the start and end times for participants in the study. We can use the <code>separate()</code> function to split a column into two or more columns, depending on how many separate sources of data the function detects or is instructed to detect.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/separate.png" class="img-fluid figure-img" alt="One table contains the heading z1_z2 which contains values such as xyz_10. These are different variables, so we use the separate function on the column name to split these into two new columns, z1 and z2."></p>
<p></p><figcaption class="figure-caption">Separating a column which consists of two variables</figcaption><p></p>
</figure>
</div>
<p><code>separate()</code> looks for separators between data points, e.g.&nbsp;<code>_</code> or <code>-</code>, and splits columns there. So, if we have many separators within our data, but we only want to split the columns at one of them, we need to be explicit in where to split the data.</p>
<p>Let’s fix the messy data, starting with splitting columns that contain multiple variables. First, we’ll start with <code>enjoymentFOLLOW</code> which has only one separator, <code>_</code> between the values in the column. Using the function without specifying the separator works fine in this instance. We just need to specify the names of the new columns.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use the arrow on the table to see all columns and the pages to see all rows.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(enjoymentFOLLOW, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"enjoyment"</span>, <span class="st">"follow_up"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[6],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[11],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[18],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[19],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"2018-03-22 23:06:11_2018-03-23 00:25:51","3":"FINISH","4":"M","5":"54","6":"NA","7":"X","8":"NA","9":"NA","10":"X","11":"NA","12":"1","13":"1","14":"1","15":"0","16":"0","17":"0","18":"7","19":"no"},{"1":"27","2":"2018-03-26 00:30:20_2018-03-26 02:15:52","3":"no","4":"M","5":"54","6":"NA","7":"X","8":"X","9":"NA","10":"X","11":"NA","12":"0","13":"0","14":"0","15":"1","16":"0","17":"1","18":"6","19":"yes"},{"1":"28","2":"2018-03-21 11:09:38_2018-03-21 12:16:28","3":"END","4":"F","5":"37","6":"X","7":"NA","8":"X","9":"NA","10":"NA","11":"X","12":"0","13":"1","14":"0","15":"0","16":"1","17":"1","18":"4","19":"yes"},{"1":"29","2":"2018-03-25 13:03:58_2018-03-25 14:45:25","3":"ethics","4":"M","5":"51","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"0","13":"1","14":"1","15":"0","16":"1","17":"0","18":"0","19":"no"},{"1":"30","2":"2018-03-24 06:46:30_2018-03-24 08:17:29","3":"ethics","4":"M","5":"52","6":"X","7":"NA","8":"NA","9":"X","10":"X","11":"NA","12":"1","13":"1","14":"0","15":"0","16":"1","17":"1","18":"4","19":"no"},{"1":"A2","2":"2018-03-21 03:23:57_2018-03-21 04:28:01","3":"END","4":"male","5":"39","6":"x","7":"x","8":"x","9":"NA","10":"NA","11":"NA","12":"0","13":"1","14":"1","15":"1","16":"0","17":"1","18":"5","19":"no"},{"1":"A3","2":"2018-03-25 21:07:24_2018-03-25 22:51:44","3":"ethics","4":"M","5":"47","6":"NA","7":"NA","8":"X","9":"X","10":"NA","11":"NA","12":"0","13":"1","14":"1","15":"1","16":"1","17":"1","18":"0","19":"no"},{"1":"C","2":"2018-03-24 18:03:12_2018-03-24 19:38:12","3":"ethics","4":"M","5":"53","6":"NA","7":"NA","8":"NA","9":"NA","10":"X","11":"NA","12":"1","13":"0","14":"1","15":"0","16":"1","17":"0","18":"6","19":"no"},{"1":"D","2":"2018-03-22 04:16:08_2018-03-22 05:29:05","3":"NA","4":"M","5":"68","6":"X","7":"X","8":"X","9":"X","10":"NA","11":"NA","12":"0","13":"0","14":"1","15":"1","16":"0","17":"1","18":"1","19":"yes"},{"1":"I","2":"2018-03-23 02:48:32_2018-03-23 04:09:31","3":"END","4":"M","5":"50","6":"NA","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"1","13":"1","14":"1","15":"1","16":"0","17":"1","18":"4","19":"yes"},{"1":"J","2":"2018-03-25 23:56:13_2018-03-26 01:41:32","3":"END","4":"M","5":"46","6":"NA","7":"X","8":"X","9":"NA","10":"NA","11":"NA","12":"1","13":"0","14":"1","15":"1","16":"1","17":"1","18":"3","19":"no"},{"1":"K","2":"2018-03-22 21:17:22_2018-03-22 22:36:24","3":"END","4":"M","5":"55","6":"NA","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"0","13":"1","14":"1","15":"1","16":"0","17":"1","18":"1","19":"yes"},{"1":"M1","2":"2018-03-26 18:28:33_2018-03-26 20:20:30","3":"END","4":"Female","5":"53","6":"NA","7":"NA","8":"NA","9":"X","10":"X","11":"NA","12":"1","13":"0","14":"1","15":"1","16":"0","17":"1","18":"5","19":"yes"},{"1":"M2","2":"2018-03-26 01:23:54_2018-03-26 03:09:45","3":"END","4":"F","5":"49","6":"NA","7":"NA","8":"NA","9":"X","10":"X","11":"NA","12":"1","13":"1","14":"1","15":"1","16":"0","17":"1","18":"5","19":"no"},{"1":"P","2":"2018-03-21 04:15:50_2018-03-21 05:20:13","3":"END","4":"F","5":"61","6":"X","7":"X","8":"NA","9":"X","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"6","19":"yes"},{"1":"R1","2":"2018-03-24 02:46:45_2018-03-24 04:16:18","3":"END","4":"F","5":"56","6":"X","7":"NA","8":"NA","9":"X","10":"X","11":"NA","12":"1","13":"1","14":"1","15":"0","16":"1","17":"0","18":"1","19":"yes"},{"1":"R2","2":"2018-03-25 03:43:36_2018-03-25 05:21:42","3":"END","4":"M","5":"53","6":"NA","7":"NA","8":"NA","9":"NA","10":"X","11":"NA","12":"1","13":"0","14":"0","15":"0","16":"1","17":"0","18":"5","19":"no"},{"1":"R3","2":"2018-03-21 06:16:32_2018-03-21 07:21:37","3":"END","4":"F","5":"28","6":"NA","7":"X","8":"NA","9":"X","10":"X","11":"NA","12":"1","13":"0","14":"1","15":"1","16":"0","17":"1","18":"4","19":"no"},{"1":"S","2":"2018-03-24 18:07:05_2018-03-24 19:42:07","3":"END","4":"F","5":"50","6":"NA","7":"NA","8":"x","9":"NA","10":"NA","11":"NA","12":"0","13":"0","14":"1","15":"1","16":"0","17":"1","18":"2","19":"yes"},{"1":"T1","2":"2018-03-21 19:23:38_2018-03-21 20:33:25","3":"END","4":"M","5":"47","6":"x","7":"NA","8":"NA","9":"x","10":"x","11":"NA","12":"0","13":"1","14":"0","15":"0","16":"1","17":"1","18":"6","19":"yes"},{"1":"T2","2":"2018-03-26 08:15:03_2018-03-26 10:03:21","3":"END","4":"F","5":"24","6":"X","7":"X","8":"X","9":"X","10":"NA","11":"X","12":"1","13":"1","14":"0","15":"1","16":"1","17":"1","18":"5","19":"no"},{"1":"V","2":"2018-03-22 16:40:33_2018-03-22 17:57:56","3":"END","4":"M","5":"68","6":"NA","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"0","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"no"},{"1":"W1","2":"2018-03-21 04:04:38_2018-03-21 05:08:57","3":"END","4":"F","5":"33","6":"x","7":"NA","8":"x","9":"x","10":"x","11":"NA","12":"0","13":"0","14":"1","15":"1","16":"1","17":"1","18":"4","19":"no"},{"1":"W2","2":"2018-03-24 12:08:05_2018-03-24 13:40:59","3":"END","4":"M","5":"39","6":"x","7":"x","8":"NA","9":"NA","10":"x","11":"NA","12":"1","13":"1","14":"0","15":"1","16":"0","17":"1","18":"4","19":"no"},{"1":"Z","2":"2018-03-25 10:40:49_2018-03-25 12:21:25","3":"END","4":"M","5":"64","6":"x","7":"NA","8":"NA","9":"x","10":"x","11":"x","12":"0","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"7","19":"no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"1","19":"no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"1","19":"yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"0","19":"no"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>We now have separate columns for each variable. Next, we need to fix <code>time</code>. What happens if we don’t specify a separator?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(time, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"start_time"</span>, <span class="st">"end_time"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 2 pieces. Additional pieces discarded in 25 rows [1, 2, 3, 4, 5, 6, 7,
8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, ...].</code></pre>
</div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoymentFOLLOW"],"name":[19],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"2018","3":"03","4":"FINISH","5":"M","6":"54","7":"NA","8":"X","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"7-no"},{"1":"27","2":"2018","3":"03","4":"no","5":"M","6":"54","7":"NA","8":"X","9":"X","10":"NA","11":"X","12":"NA","13":"0","14":"0","15":"0","16":"1","17":"0","18":"1","19":"6-yes"},{"1":"28","2":"2018","3":"03","4":"END","5":"F","6":"37","7":"X","8":"NA","9":"X","10":"NA","11":"NA","12":"X","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4-yes"},{"1":"29","2":"2018","3":"03","4":"ethics","5":"M","6":"51","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"0","17":"1","18":"0","19":"0-no"},{"1":"30","2":"2018","3":"03","4":"ethics","5":"M","6":"52","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4-no"},{"1":"A2","2":"2018","3":"03","4":"END","5":"male","6":"39","7":"x","8":"x","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5-no"},{"1":"A3","2":"2018","3":"03","4":"ethics","5":"M","6":"47","7":"NA","8":"NA","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"1","18":"1","19":"0-no"},{"1":"C","2":"2018","3":"03","4":"ethics","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"0","17":"1","18":"0","19":"6-no"},{"1":"D","2":"2018","3":"03","4":"NA","5":"M","6":"68","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"1-yes"},{"1":"I","2":"2018","3":"03","4":"END","5":"M","6":"50","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"4-yes"},{"1":"J","2":"2018","3":"03","4":"END","5":"M","6":"46","7":"NA","8":"X","9":"X","10":"NA","11":"NA","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"1","18":"1","19":"3-no"},{"1":"K","2":"2018","3":"03","4":"END","5":"M","6":"55","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"1-yes"},{"1":"M1","2":"2018","3":"03","4":"END","5":"Female","6":"53","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"5-yes"},{"1":"M2","2":"2018","3":"03","4":"END","5":"F","6":"49","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5-no"},{"1":"P","2":"2018","3":"03","4":"END","5":"F","6":"61","7":"X","8":"X","9":"NA","10":"X","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"6-yes"},{"1":"R1","2":"2018","3":"03","4":"END","5":"F","6":"56","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"1-yes"},{"1":"R2","2":"2018","3":"03","4":"END","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"0","16":"0","17":"1","18":"0","19":"5-no"},{"1":"R3","2":"2018","3":"03","4":"END","5":"F","6":"28","7":"NA","8":"X","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"4-no"},{"1":"S","2":"2018","3":"03","4":"END","5":"F","6":"50","7":"NA","8":"NA","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"2-yes"},{"1":"T1","2":"2018","3":"03","4":"END","5":"M","6":"47","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"NA","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"6-yes"},{"1":"T2","2":"2018","3":"03","4":"END","5":"F","6":"24","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"X","13":"1","14":"1","15":"0","16":"1","17":"1","18":"1","19":"5-no"},{"1":"V","2":"2018","3":"03","4":"END","5":"M","6":"68","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0-no"},{"1":"W1","2":"2018","3":"03","4":"END","5":"F","6":"33","7":"x","8":"NA","9":"x","10":"x","11":"x","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"1","18":"1","19":"4-no"},{"1":"W2","2":"2018","3":"03","4":"END","5":"M","6":"39","7":"x","8":"x","9":"NA","10":"NA","11":"x","12":"NA","13":"1","14":"1","15":"0","16":"1","17":"0","18":"1","19":"4-no"},{"1":"Z","2":"2018","3":"03","4":"END","5":"M","6":"64","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"x","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0-yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"7-no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1-no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1-yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"0-no"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>We have start and end times, but these don’t look correct. We also have a warning saying that due to our names <code>separate()</code> expected two rows but created (and dropped) 25! That’s because datetimes are made up of many separators, e.g.&nbsp;“2018-03-22 23:06:11”. In this instance, the start and end times are separated by an underscore, e.g.&nbsp;“2018-03-22 23:06:11_2018-03-23 00:25:51”. We can use this to tell <code>separate()</code> to only split the data at this separator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> time, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"start_time"</span>, <span class="st">"end_time"</span>), <span class="at">sep =</span> <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoymentFOLLOW"],"name":[19],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"2018-03-22 23:06:11","3":"2018-03-23 00:25:51","4":"FINISH","5":"M","6":"54","7":"NA","8":"X","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"7-no"},{"1":"27","2":"2018-03-26 00:30:20","3":"2018-03-26 02:15:52","4":"no","5":"M","6":"54","7":"NA","8":"X","9":"X","10":"NA","11":"X","12":"NA","13":"0","14":"0","15":"0","16":"1","17":"0","18":"1","19":"6-yes"},{"1":"28","2":"2018-03-21 11:09:38","3":"2018-03-21 12:16:28","4":"END","5":"F","6":"37","7":"X","8":"NA","9":"X","10":"NA","11":"NA","12":"X","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4-yes"},{"1":"29","2":"2018-03-25 13:03:58","3":"2018-03-25 14:45:25","4":"ethics","5":"M","6":"51","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"0","17":"1","18":"0","19":"0-no"},{"1":"30","2":"2018-03-24 06:46:30","3":"2018-03-24 08:17:29","4":"ethics","5":"M","6":"52","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4-no"},{"1":"A2","2":"2018-03-21 03:23:57","3":"2018-03-21 04:28:01","4":"END","5":"male","6":"39","7":"x","8":"x","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5-no"},{"1":"A3","2":"2018-03-25 21:07:24","3":"2018-03-25 22:51:44","4":"ethics","5":"M","6":"47","7":"NA","8":"NA","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"1","18":"1","19":"0-no"},{"1":"C","2":"2018-03-24 18:03:12","3":"2018-03-24 19:38:12","4":"ethics","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"0","17":"1","18":"0","19":"6-no"},{"1":"D","2":"2018-03-22 04:16:08","3":"2018-03-22 05:29:05","4":"NA","5":"M","6":"68","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"1-yes"},{"1":"I","2":"2018-03-23 02:48:32","3":"2018-03-23 04:09:31","4":"END","5":"M","6":"50","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"4-yes"},{"1":"J","2":"2018-03-25 23:56:13","3":"2018-03-26 01:41:32","4":"END","5":"M","6":"46","7":"NA","8":"X","9":"X","10":"NA","11":"NA","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"1","18":"1","19":"3-no"},{"1":"K","2":"2018-03-22 21:17:22","3":"2018-03-22 22:36:24","4":"END","5":"M","6":"55","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"1-yes"},{"1":"M1","2":"2018-03-26 18:28:33","3":"2018-03-26 20:20:30","4":"END","5":"Female","6":"53","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"5-yes"},{"1":"M2","2":"2018-03-26 01:23:54","3":"2018-03-26 03:09:45","4":"END","5":"F","6":"49","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5-no"},{"1":"P","2":"2018-03-21 04:15:50","3":"2018-03-21 05:20:13","4":"END","5":"F","6":"61","7":"X","8":"X","9":"NA","10":"X","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"6-yes"},{"1":"R1","2":"2018-03-24 02:46:45","3":"2018-03-24 04:16:18","4":"END","5":"F","6":"56","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"1-yes"},{"1":"R2","2":"2018-03-25 03:43:36","3":"2018-03-25 05:21:42","4":"END","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"0","16":"0","17":"1","18":"0","19":"5-no"},{"1":"R3","2":"2018-03-21 06:16:32","3":"2018-03-21 07:21:37","4":"END","5":"F","6":"28","7":"NA","8":"X","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"4-no"},{"1":"S","2":"2018-03-24 18:07:05","3":"2018-03-24 19:42:07","4":"END","5":"F","6":"50","7":"NA","8":"NA","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"2-yes"},{"1":"T1","2":"2018-03-21 19:23:38","3":"2018-03-21 20:33:25","4":"END","5":"M","6":"47","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"NA","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"6-yes"},{"1":"T2","2":"2018-03-26 08:15:03","3":"2018-03-26 10:03:21","4":"END","5":"F","6":"24","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"X","13":"1","14":"1","15":"0","16":"1","17":"1","18":"1","19":"5-no"},{"1":"V","2":"2018-03-22 16:40:33","3":"2018-03-22 17:57:56","4":"END","5":"M","6":"68","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0-no"},{"1":"W1","2":"2018-03-21 04:04:38","3":"2018-03-21 05:08:57","4":"END","5":"F","6":"33","7":"x","8":"NA","9":"x","10":"x","11":"x","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"1","18":"1","19":"4-no"},{"1":"W2","2":"2018-03-24 12:08:05","3":"2018-03-24 13:40:59","4":"END","5":"M","6":"39","7":"x","8":"x","9":"NA","10":"NA","11":"x","12":"NA","13":"1","14":"1","15":"0","16":"1","17":"0","18":"1","19":"4-no"},{"1":"Z","2":"2018-03-25 10:40:49","3":"2018-03-25 12:21:25","4":"END","5":"M","6":"64","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"x","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0-yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"7-no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1-no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1-yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"0-no"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Now we have the expected output.</p>
<p>To put all of this together, we can chain multiple separation calls together with the pipe. Notice that unless we assign the result back to the variable we haven’t actually changed our data set. So, we’ll do this now.</p>
<p>Again, we use <code>glimpse()</code> to view all columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> raw_data <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> enjoymentFOLLOW, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"enjoyment"</span>, <span class="st">"follow_up"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> time, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"start_time"</span>, <span class="st">"end_time"</span>), <span class="at">sep =</span> <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="selecting-columns" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="selecting-columns"><span class="header-section-number">3.4</span> Selecting Columns</h2>
<p>Often your data set has lots of columns you won’t use. This can make working with the data more difficult and takes up memory on our computer which can slow things down. We can choose which columns to keep by listing them by name or by position within the <code>select()</code> function.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/select.png" class="img-fluid figure-img" alt="A table contains columns x, y, and z. Selecting x and y results in a table with only these columns."></p>
<p></p><figcaption class="figure-caption">Selecting specific columns from the data set</figcaption><p></p>
</figure>
</div>
<section id="selecting-columns-to-keep" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="selecting-columns-to-keep"><span class="header-section-number">3.4.1</span> Selecting Columns to Keep</h3>
<p>By default, <code>select()</code> works by keeping the columns that you list within it. Here are two examples where we use the bare column names and the index to keep the columns we’d like.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PID, Gender, Age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"26","2":"M","3":"54"},{"1":"27","2":"M","3":"54"},{"1":"28","2":"F","3":"37"},{"1":"29","2":"M","3":"51"},{"1":"30","2":"M","3":"52"},{"1":"A2","2":"male","3":"39"},{"1":"A3","2":"M","3":"47"},{"1":"C","2":"M","3":"53"},{"1":"D","2":"M","3":"68"},{"1":"I","2":"M","3":"50"},{"1":"J","2":"M","3":"46"},{"1":"K","2":"M","3":"55"},{"1":"M1","2":"Female","3":"53"},{"1":"M2","2":"F","3":"49"},{"1":"P","2":"F","3":"61"},{"1":"R1","2":"F","3":"56"},{"1":"R2","2":"M","3":"53"},{"1":"R3","2":"F","3":"28"},{"1":"S","2":"F","3":"50"},{"1":"T1","2":"M","3":"47"},{"1":"T2","2":"F","3":"24"},{"1":"V","2":"M","3":"68"},{"1":"W1","2":"F","3":"33"},{"1":"W2","2":"M","3":"39"},{"1":"Z","2":"M","3":"64"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"26","2":"M","3":"54"},{"1":"27","2":"M","3":"54"},{"1":"28","2":"F","3":"37"},{"1":"29","2":"M","3":"51"},{"1":"30","2":"M","3":"52"},{"1":"A2","2":"male","3":"39"},{"1":"A3","2":"M","3":"47"},{"1":"C","2":"M","3":"53"},{"1":"D","2":"M","3":"68"},{"1":"I","2":"M","3":"50"},{"1":"J","2":"M","3":"46"},{"1":"K","2":"M","3":"55"},{"1":"M1","2":"Female","3":"53"},{"1":"M2","2":"F","3":"49"},{"1":"P","2":"F","3":"61"},{"1":"R1","2":"F","3":"56"},{"1":"R2","2":"M","3":"53"},{"1":"R3","2":"F","3":"28"},{"1":"S","2":"F","3":"50"},{"1":"T1","2":"M","3":"47"},{"1":"T2","2":"F","3":"24"},{"1":"V","2":"M","3":"68"},{"1":"W1","2":"F","3":"33"},{"1":"W2","2":"M","3":"39"},{"1":"Z","2":"M","3":"64"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="selecting-columns-to-remove" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="selecting-columns-to-remove"><span class="header-section-number">3.4.2</span> Selecting Columns to Remove</h3>
<p>We can also select columns to remove by using <code>-</code> before the names or index. We can list these as between a range, e.g.&nbsp;<code>6:47</code> or <code>c(Age:follow_up)</code>, or as a specific vector of indices, e.g.&nbsp;<code>c(1, 2, 3)</code> or <code>c(PID, start_time, end_time)</code>. An example is shown below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Age<span class="sc">:</span>follow_up))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"2018-03-22 23:06:11","3":"2018-03-23 00:25:51","4":"FINISH","5":"M"},{"1":"27","2":"2018-03-26 00:30:20","3":"2018-03-26 02:15:52","4":"no","5":"M"},{"1":"28","2":"2018-03-21 11:09:38","3":"2018-03-21 12:16:28","4":"END","5":"F"},{"1":"29","2":"2018-03-25 13:03:58","3":"2018-03-25 14:45:25","4":"ethics","5":"M"},{"1":"30","2":"2018-03-24 06:46:30","3":"2018-03-24 08:17:29","4":"ethics","5":"M"},{"1":"A2","2":"2018-03-21 03:23:57","3":"2018-03-21 04:28:01","4":"END","5":"male"},{"1":"A3","2":"2018-03-25 21:07:24","3":"2018-03-25 22:51:44","4":"ethics","5":"M"},{"1":"C","2":"2018-03-24 18:03:12","3":"2018-03-24 19:38:12","4":"ethics","5":"M"},{"1":"D","2":"2018-03-22 04:16:08","3":"2018-03-22 05:29:05","4":"NA","5":"M"},{"1":"I","2":"2018-03-23 02:48:32","3":"2018-03-23 04:09:31","4":"END","5":"M"},{"1":"J","2":"2018-03-25 23:56:13","3":"2018-03-26 01:41:32","4":"END","5":"M"},{"1":"K","2":"2018-03-22 21:17:22","3":"2018-03-22 22:36:24","4":"END","5":"M"},{"1":"M1","2":"2018-03-26 18:28:33","3":"2018-03-26 20:20:30","4":"END","5":"Female"},{"1":"M2","2":"2018-03-26 01:23:54","3":"2018-03-26 03:09:45","4":"END","5":"F"},{"1":"P","2":"2018-03-21 04:15:50","3":"2018-03-21 05:20:13","4":"END","5":"F"},{"1":"R1","2":"2018-03-24 02:46:45","3":"2018-03-24 04:16:18","4":"END","5":"F"},{"1":"R2","2":"2018-03-25 03:43:36","3":"2018-03-25 05:21:42","4":"END","5":"M"},{"1":"R3","2":"2018-03-21 06:16:32","3":"2018-03-21 07:21:37","4":"END","5":"F"},{"1":"S","2":"2018-03-24 18:07:05","3":"2018-03-24 19:42:07","4":"END","5":"F"},{"1":"T1","2":"2018-03-21 19:23:38","3":"2018-03-21 20:33:25","4":"END","5":"M"},{"1":"T2","2":"2018-03-26 08:15:03","3":"2018-03-26 10:03:21","4":"END","5":"F"},{"1":"V","2":"2018-03-22 16:40:33","3":"2018-03-22 17:57:56","4":"END","5":"M"},{"1":"W1","2":"2018-03-21 04:04:38","3":"2018-03-21 05:08:57","4":"END","5":"F"},{"1":"W2","2":"2018-03-24 12:08:05","3":"2018-03-24 13:40:59","4":"END","5":"M"},{"1":"Z","2":"2018-03-25 10:40:49","3":"2018-03-25 12:21:25","4":"END","5":"M"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="select-helpers" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="select-helpers"><span class="header-section-number">3.4.3</span> Select Helpers</h3>
<p>For simple cases, stating the name or index of the column is fine. However, if we’re working with many columns that have a consistent naming pattern, we can make our code shorter and perhaps avoid more mistakes by using select helper functions. There are a number of <code>select()</code> helpers to make working with it easier:</p>
<ul>
<li><code>starts_with()</code>: keep columns starting with a specific string.</li>
<li><code>ends_with()</code>: keep columns ending with a specific string.</li>
<li><code>contains()</code>: keep columns containing a specific string.</li>
<li><code>matches()</code>: Keeps columns matching a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Cheatsheet">regular expression</a>. This is useful for complex matching.</li>
<li><code>num_range()</code>: Keeps columns with a matching prefix and a following range of numbers.</li>
</ul>
<p>Contains is a very common select helper that you might need to use. Here, we want to select all columns that contain the string “DJG”, corresponding to the De Jong Gierveld scale for emotional and social loneliness. These columns correspond to specific questions from this scale.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"DJG"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["DJG_1"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"1","4":"0","5":"0","6":"0"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"1"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"1"},{"1":"0","2":"1","3":"1","4":"0","5":"1","6":"0"},{"1":"1","2":"1","3":"0","4":"0","5":"1","6":"1"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1"},{"1":"0","2":"1","3":"1","4":"1","5":"1","6":"1"},{"1":"1","2":"0","3":"1","4":"0","5":"1","6":"0"},{"1":"0","2":"0","3":"1","4":"1","5":"0","6":"1"},{"1":"1","2":"1","3":"1","4":"1","5":"0","6":"1"},{"1":"1","2":"0","3":"1","4":"1","5":"1","6":"1"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1"},{"1":"1","2":"0","3":"1","4":"1","5":"0","6":"1"},{"1":"1","2":"1","3":"1","4":"1","5":"0","6":"1"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA"},{"1":"1","2":"1","3":"1","4":"0","5":"1","6":"0"},{"1":"1","2":"0","3":"0","4":"0","5":"1","6":"0"},{"1":"1","2":"0","3":"1","4":"1","5":"0","6":"1"},{"1":"0","2":"0","3":"1","4":"1","5":"0","6":"1"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"1"},{"1":"1","2":"1","3":"0","4":"1","5":"1","6":"1"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1"},{"1":"0","2":"0","3":"1","4":"1","5":"1","6":"1"},{"1":"1","2":"1","3":"0","4":"1","5":"0","6":"1"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>However, if we want to select only a subset of those which match a prefix but end in only specific values, we can use the <code>num_range()</code> function. Let’s keep columns that begin with “DJG_” and end with the values 1, 2, or 3.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">num_range</span>(<span class="st">"DJG_"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["DJG_1"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"1"},{"1":"0","2":"0","3":"0"},{"1":"0","2":"1","3":"0"},{"1":"0","2":"1","3":"1"},{"1":"1","2":"1","3":"0"},{"1":"0","2":"1","3":"1"},{"1":"0","2":"1","3":"1"},{"1":"1","2":"0","3":"1"},{"1":"0","2":"0","3":"1"},{"1":"1","2":"1","3":"1"},{"1":"1","2":"0","3":"1"},{"1":"0","2":"1","3":"1"},{"1":"1","2":"0","3":"1"},{"1":"1","2":"1","3":"1"},{"1":"NA","2":"NA","3":"NA"},{"1":"1","2":"1","3":"1"},{"1":"1","2":"0","3":"0"},{"1":"1","2":"0","3":"1"},{"1":"0","2":"0","3":"1"},{"1":"0","2":"1","3":"0"},{"1":"1","2":"1","3":"0"},{"1":"0","2":"1","3":"1"},{"1":"0","2":"0","3":"1"},{"1":"1","2":"1","3":"0"},{"1":"0","2":"1","3":"1"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"},{"1":"NA","2":"NA","3":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="renaming-and-reordering-columns" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="renaming-and-reordering-columns"><span class="header-section-number">3.5</span> Renaming and Reordering Columns</h2>
<section id="renaming-columns" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="renaming-columns"><span class="header-section-number">3.5.1</span> Renaming Columns</h3>
<p>Often when reading data into R we might want to change the column names, either because they are specified so that working with them is more difficult (e.g.&nbsp;those containing spaces such as <code>`Time Since BI`</code> which requires us to use back ticks around names to access them, e.g.&nbsp;<code>raw_data$`Time Since BI`</code>) or because they are excessively long or uninformative.</p>
<p>We can use the <code>rename()</code> function to change the name of columns. This takes the format of <strong>new = old</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/rename.png" class="img-fluid figure-img" alt="A table with columns x, y, and old is shown. Using the rename function and passing the new = old updates the name of the old column to new."></p>
<p></p><figcaption class="figure-caption">Renaming columns</figcaption><p></p>
</figure>
</div>
<p>Here we will make the <code>PID</code> column more informative by making it <code>participant_id</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">participant_id =</span> PID)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["participant_id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[19],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[20],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"2018-03-22 23:06:11","3":"2018-03-23 00:25:51","4":"FINISH","5":"M","6":"54","7":"NA","8":"X","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"7","20":"no"},{"1":"27","2":"2018-03-26 00:30:20","3":"2018-03-26 02:15:52","4":"no","5":"M","6":"54","7":"NA","8":"X","9":"X","10":"NA","11":"X","12":"NA","13":"0","14":"0","15":"0","16":"1","17":"0","18":"1","19":"6","20":"yes"},{"1":"28","2":"2018-03-21 11:09:38","3":"2018-03-21 12:16:28","4":"END","5":"F","6":"37","7":"X","8":"NA","9":"X","10":"NA","11":"NA","12":"X","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"yes"},{"1":"29","2":"2018-03-25 13:03:58","3":"2018-03-25 14:45:25","4":"ethics","5":"M","6":"51","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"0","17":"1","18":"0","19":"0","20":"no"},{"1":"30","2":"2018-03-24 06:46:30","3":"2018-03-24 08:17:29","4":"ethics","5":"M","6":"52","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"no"},{"1":"A2","2":"2018-03-21 03:23:57","3":"2018-03-21 04:28:01","4":"END","5":"male","6":"39","7":"x","8":"x","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"A3","2":"2018-03-25 21:07:24","3":"2018-03-25 22:51:44","4":"ethics","5":"M","6":"47","7":"NA","8":"NA","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"1","18":"1","19":"0","20":"no"},{"1":"C","2":"2018-03-24 18:03:12","3":"2018-03-24 19:38:12","4":"ethics","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"0","17":"1","18":"0","19":"6","20":"no"},{"1":"D","2":"2018-03-22 04:16:08","3":"2018-03-22 05:29:05","4":"NA","5":"M","6":"68","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"I","2":"2018-03-23 02:48:32","3":"2018-03-23 04:09:31","4":"END","5":"M","6":"50","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"4","20":"yes"},{"1":"J","2":"2018-03-25 23:56:13","3":"2018-03-26 01:41:32","4":"END","5":"M","6":"46","7":"NA","8":"X","9":"X","10":"NA","11":"NA","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"1","18":"1","19":"3","20":"no"},{"1":"K","2":"2018-03-22 21:17:22","3":"2018-03-22 22:36:24","4":"END","5":"M","6":"55","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"M1","2":"2018-03-26 18:28:33","3":"2018-03-26 20:20:30","4":"END","5":"Female","6":"53","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"5","20":"yes"},{"1":"M2","2":"2018-03-26 01:23:54","3":"2018-03-26 03:09:45","4":"END","5":"F","6":"49","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"P","2":"2018-03-21 04:15:50","3":"2018-03-21 05:20:13","4":"END","5":"F","6":"61","7":"X","8":"X","9":"NA","10":"X","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"6","20":"yes"},{"1":"R1","2":"2018-03-24 02:46:45","3":"2018-03-24 04:16:18","4":"END","5":"F","6":"56","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"1","20":"yes"},{"1":"R2","2":"2018-03-25 03:43:36","3":"2018-03-25 05:21:42","4":"END","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"0","16":"0","17":"1","18":"0","19":"5","20":"no"},{"1":"R3","2":"2018-03-21 06:16:32","3":"2018-03-21 07:21:37","4":"END","5":"F","6":"28","7":"NA","8":"X","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"S","2":"2018-03-24 18:07:05","3":"2018-03-24 19:42:07","4":"END","5":"F","6":"50","7":"NA","8":"NA","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"2","20":"yes"},{"1":"T1","2":"2018-03-21 19:23:38","3":"2018-03-21 20:33:25","4":"END","5":"M","6":"47","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"NA","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"6","20":"yes"},{"1":"T2","2":"2018-03-26 08:15:03","3":"2018-03-26 10:03:21","4":"END","5":"F","6":"24","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"X","13":"1","14":"1","15":"0","16":"1","17":"1","18":"1","19":"5","20":"no"},{"1":"V","2":"2018-03-22 16:40:33","3":"2018-03-22 17:57:56","4":"END","5":"M","6":"68","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"no"},{"1":"W1","2":"2018-03-21 04:04:38","3":"2018-03-21 05:08:57","4":"END","5":"F","6":"33","7":"x","8":"NA","9":"x","10":"x","11":"x","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"1","18":"1","19":"4","20":"no"},{"1":"W2","2":"2018-03-24 12:08:05","3":"2018-03-24 13:40:59","4":"END","5":"M","6":"39","7":"x","8":"x","9":"NA","10":"NA","11":"x","12":"NA","13":"1","14":"1","15":"0","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"Z","2":"2018-03-25 10:40:49","3":"2018-03-25 12:21:25","4":"END","5":"M","6":"64","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"x","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"7","20":"no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1","20":"no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1","20":"yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"0","20":"no"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="renaming-columns-automatically" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="renaming-columns-automatically"><span class="header-section-number">3.5.2</span> Renaming Columns Automatically</h3>
<p>The <code>janitor</code> package has a function, <code>clean_names()</code>, which fixes irregularities in names. Mainly, it’s good practice to keep one format such as <strong>snake_case</strong>, to avoid spaces in names, and to avoid numbers at the start of column names.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["pid"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["djg_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["djg_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["djg_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["djg_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["djg_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["djg_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[19],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[20],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"2018-03-22 23:06:11","3":"2018-03-23 00:25:51","4":"FINISH","5":"M","6":"54","7":"NA","8":"X","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"7","20":"no"},{"1":"27","2":"2018-03-26 00:30:20","3":"2018-03-26 02:15:52","4":"no","5":"M","6":"54","7":"NA","8":"X","9":"X","10":"NA","11":"X","12":"NA","13":"0","14":"0","15":"0","16":"1","17":"0","18":"1","19":"6","20":"yes"},{"1":"28","2":"2018-03-21 11:09:38","3":"2018-03-21 12:16:28","4":"END","5":"F","6":"37","7":"X","8":"NA","9":"X","10":"NA","11":"NA","12":"X","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"yes"},{"1":"29","2":"2018-03-25 13:03:58","3":"2018-03-25 14:45:25","4":"ethics","5":"M","6":"51","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"0","17":"1","18":"0","19":"0","20":"no"},{"1":"30","2":"2018-03-24 06:46:30","3":"2018-03-24 08:17:29","4":"ethics","5":"M","6":"52","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"no"},{"1":"A2","2":"2018-03-21 03:23:57","3":"2018-03-21 04:28:01","4":"END","5":"male","6":"39","7":"x","8":"x","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"A3","2":"2018-03-25 21:07:24","3":"2018-03-25 22:51:44","4":"ethics","5":"M","6":"47","7":"NA","8":"NA","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"1","18":"1","19":"0","20":"no"},{"1":"C","2":"2018-03-24 18:03:12","3":"2018-03-24 19:38:12","4":"ethics","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"0","17":"1","18":"0","19":"6","20":"no"},{"1":"D","2":"2018-03-22 04:16:08","3":"2018-03-22 05:29:05","4":"NA","5":"M","6":"68","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"I","2":"2018-03-23 02:48:32","3":"2018-03-23 04:09:31","4":"END","5":"M","6":"50","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"4","20":"yes"},{"1":"J","2":"2018-03-25 23:56:13","3":"2018-03-26 01:41:32","4":"END","5":"M","6":"46","7":"NA","8":"X","9":"X","10":"NA","11":"NA","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"1","18":"1","19":"3","20":"no"},{"1":"K","2":"2018-03-22 21:17:22","3":"2018-03-22 22:36:24","4":"END","5":"M","6":"55","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"M1","2":"2018-03-26 18:28:33","3":"2018-03-26 20:20:30","4":"END","5":"Female","6":"53","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"5","20":"yes"},{"1":"M2","2":"2018-03-26 01:23:54","3":"2018-03-26 03:09:45","4":"END","5":"F","6":"49","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"P","2":"2018-03-21 04:15:50","3":"2018-03-21 05:20:13","4":"END","5":"F","6":"61","7":"X","8":"X","9":"NA","10":"X","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"6","20":"yes"},{"1":"R1","2":"2018-03-24 02:46:45","3":"2018-03-24 04:16:18","4":"END","5":"F","6":"56","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"1","20":"yes"},{"1":"R2","2":"2018-03-25 03:43:36","3":"2018-03-25 05:21:42","4":"END","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"0","16":"0","17":"1","18":"0","19":"5","20":"no"},{"1":"R3","2":"2018-03-21 06:16:32","3":"2018-03-21 07:21:37","4":"END","5":"F","6":"28","7":"NA","8":"X","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"S","2":"2018-03-24 18:07:05","3":"2018-03-24 19:42:07","4":"END","5":"F","6":"50","7":"NA","8":"NA","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"2","20":"yes"},{"1":"T1","2":"2018-03-21 19:23:38","3":"2018-03-21 20:33:25","4":"END","5":"M","6":"47","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"NA","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"6","20":"yes"},{"1":"T2","2":"2018-03-26 08:15:03","3":"2018-03-26 10:03:21","4":"END","5":"F","6":"24","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"X","13":"1","14":"1","15":"0","16":"1","17":"1","18":"1","19":"5","20":"no"},{"1":"V","2":"2018-03-22 16:40:33","3":"2018-03-22 17:57:56","4":"END","5":"M","6":"68","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"no"},{"1":"W1","2":"2018-03-21 04:04:38","3":"2018-03-21 05:08:57","4":"END","5":"F","6":"33","7":"x","8":"NA","9":"x","10":"x","11":"x","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"1","18":"1","19":"4","20":"no"},{"1":"W2","2":"2018-03-24 12:08:05","3":"2018-03-24 13:40:59","4":"END","5":"M","6":"39","7":"x","8":"x","9":"NA","10":"NA","11":"x","12":"NA","13":"1","14":"1","15":"0","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"Z","2":"2018-03-25 10:40:49","3":"2018-03-25 12:21:25","4":"END","5":"M","6":"64","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"x","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"7","20":"no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1","20":"no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1","20":"yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"0","20":"no"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="reordering-columns" class="level3" data-number="3.5.3">
<h3 data-number="3.5.3" class="anchored" data-anchor-id="reordering-columns"><span class="header-section-number">3.5.3</span> Reordering Columns</h3>
<p>We can also use <code>select()</code> to reorder columns. Either specify the names or indices of every column you’d like in the order you’d like, or you can use the <code>everything()</code> helper function to make this easier. To use this function, we simply state the order of columns we’d like in a specific order, then use <code>everything()</code> to keep every other column in the data set after those specified in the specific order.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PID, Gender, Age, start_time, end_time, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["start_time"],"name":[4],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[5],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[6],"type":["chr"],"align":["left"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[19],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[20],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"M","3":"54","4":"2018-03-22 23:06:11","5":"2018-03-23 00:25:51","6":"FINISH","7":"NA","8":"X","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"7","20":"no"},{"1":"27","2":"M","3":"54","4":"2018-03-26 00:30:20","5":"2018-03-26 02:15:52","6":"no","7":"NA","8":"X","9":"X","10":"NA","11":"X","12":"NA","13":"0","14":"0","15":"0","16":"1","17":"0","18":"1","19":"6","20":"yes"},{"1":"28","2":"F","3":"37","4":"2018-03-21 11:09:38","5":"2018-03-21 12:16:28","6":"END","7":"X","8":"NA","9":"X","10":"NA","11":"NA","12":"X","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"yes"},{"1":"29","2":"M","3":"51","4":"2018-03-25 13:03:58","5":"2018-03-25 14:45:25","6":"ethics","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"0","17":"1","18":"0","19":"0","20":"no"},{"1":"30","2":"M","3":"52","4":"2018-03-24 06:46:30","5":"2018-03-24 08:17:29","6":"ethics","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"no"},{"1":"A2","2":"male","3":"39","4":"2018-03-21 03:23:57","5":"2018-03-21 04:28:01","6":"END","7":"x","8":"x","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"A3","2":"M","3":"47","4":"2018-03-25 21:07:24","5":"2018-03-25 22:51:44","6":"ethics","7":"NA","8":"NA","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"1","18":"1","19":"0","20":"no"},{"1":"C","2":"M","3":"53","4":"2018-03-24 18:03:12","5":"2018-03-24 19:38:12","6":"ethics","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"0","17":"1","18":"0","19":"6","20":"no"},{"1":"D","2":"M","3":"68","4":"2018-03-22 04:16:08","5":"2018-03-22 05:29:05","6":"NA","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"I","2":"M","3":"50","4":"2018-03-23 02:48:32","5":"2018-03-23 04:09:31","6":"END","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"4","20":"yes"},{"1":"J","2":"M","3":"46","4":"2018-03-25 23:56:13","5":"2018-03-26 01:41:32","6":"END","7":"NA","8":"X","9":"X","10":"NA","11":"NA","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"1","18":"1","19":"3","20":"no"},{"1":"K","2":"M","3":"55","4":"2018-03-22 21:17:22","5":"2018-03-22 22:36:24","6":"END","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"M1","2":"Female","3":"53","4":"2018-03-26 18:28:33","5":"2018-03-26 20:20:30","6":"END","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"5","20":"yes"},{"1":"M2","2":"F","3":"49","4":"2018-03-26 01:23:54","5":"2018-03-26 03:09:45","6":"END","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"P","2":"F","3":"61","4":"2018-03-21 04:15:50","5":"2018-03-21 05:20:13","6":"END","7":"X","8":"X","9":"NA","10":"X","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"6","20":"yes"},{"1":"R1","2":"F","3":"56","4":"2018-03-24 02:46:45","5":"2018-03-24 04:16:18","6":"END","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"1","20":"yes"},{"1":"R2","2":"M","3":"53","4":"2018-03-25 03:43:36","5":"2018-03-25 05:21:42","6":"END","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"0","16":"0","17":"1","18":"0","19":"5","20":"no"},{"1":"R3","2":"F","3":"28","4":"2018-03-21 06:16:32","5":"2018-03-21 07:21:37","6":"END","7":"NA","8":"X","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"S","2":"F","3":"50","4":"2018-03-24 18:07:05","5":"2018-03-24 19:42:07","6":"END","7":"NA","8":"NA","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"2","20":"yes"},{"1":"T1","2":"M","3":"47","4":"2018-03-21 19:23:38","5":"2018-03-21 20:33:25","6":"END","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"NA","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"6","20":"yes"},{"1":"T2","2":"F","3":"24","4":"2018-03-26 08:15:03","5":"2018-03-26 10:03:21","6":"END","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"X","13":"1","14":"1","15":"0","16":"1","17":"1","18":"1","19":"5","20":"no"},{"1":"V","2":"M","3":"68","4":"2018-03-22 16:40:33","5":"2018-03-22 17:57:56","6":"END","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"no"},{"1":"W1","2":"F","3":"33","4":"2018-03-21 04:04:38","5":"2018-03-21 05:08:57","6":"END","7":"x","8":"NA","9":"x","10":"x","11":"x","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"1","18":"1","19":"4","20":"no"},{"1":"W2","2":"M","3":"39","4":"2018-03-24 12:08:05","5":"2018-03-24 13:40:59","6":"END","7":"x","8":"x","9":"NA","10":"NA","11":"x","12":"NA","13":"1","14":"1","15":"0","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"Z","2":"M","3":"64","4":"2018-03-25 10:40:49","5":"2018-03-25 12:21:25","6":"END","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"x","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"7","20":"no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1","20":"no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1","20":"yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"0","20":"no"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="creating-and-changing-columns" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="creating-and-changing-columns"><span class="header-section-number">3.6</span> Creating and Changing Columns</h2>
<p>If we want to create or change a column, we have two options: <code>mutate()</code> and <code>transmute()</code>:</p>
<ul>
<li><code>mutate()</code>: changes or creates a column, keeping all existing columns.</li>
<li><code>transmute()</code>: changes or creates a column, dropping columns not defined in <code>transmute()</code>.</li>
</ul>
<p>Throughout this book we’ll mainly use <code>mutate()</code> as it’s rare to only want to work with columns you’ve just created or changed. <code>mutate()</code> can consist of a simple operation on one column, using many columns to create another, or doing conditional operations within a column.</p>
<p>Here we create a new column by adding together values from columns <code>1</code> and <code>y</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/mutate_1.png" class="img-fluid figure-img" alt="A table with columns x and y is shown. Using the mutate function, the new column z is created by defining z = x + y"></p>
<p></p><figcaption class="figure-caption">Using mutate to produce a new column based on operations on existing columns</figcaption><p></p>
</figure>
</div>
<p>Let’s look at working out the birth years of the participants in the data set. The study concluded in 2022 (despite what the <code>start_date</code> and <code>end_date</code> columns tell us), so we can take the year 2022 and subtract participant ages to find their birth year.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Below we use <code>select()</code> only to restrict the printed output for ease of viewing.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">birth_year =</span> <span class="dv">2022</span> <span class="sc">-</span> Age</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PID, birth_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["birth_year"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"26","2":"1968"},{"1":"27","2":"1968"},{"1":"28","2":"1985"},{"1":"29","2":"1971"},{"1":"30","2":"1970"},{"1":"A2","2":"1983"},{"1":"A3","2":"1975"},{"1":"C","2":"1969"},{"1":"D","2":"1954"},{"1":"I","2":"1972"},{"1":"J","2":"1976"},{"1":"K","2":"1967"},{"1":"M1","2":"1969"},{"1":"M2","2":"1973"},{"1":"P","2":"1961"},{"1":"R1","2":"1966"},{"1":"R2","2":"1969"},{"1":"R3","2":"1994"},{"1":"S","2":"1972"},{"1":"T1","2":"1975"},{"1":"T2","2":"1998"},{"1":"V","2":"1954"},{"1":"W1","2":"1989"},{"1":"W2","2":"1983"},{"1":"Z","2":"1958"},{"1":"NA","2":"NA"},{"1":"NA","2":"NA"},{"1":"NA","2":"NA"},{"1":"NA","2":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>We can also create columns by combining operations across multiple existing columns. Here, we create a total score for the De Jong Gierveld scale by adding each of the scores on the individual items.</p>
<p>Below we use <code>select()</code> only to restrict the printed output for ease of viewing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">djg_total =</span> DJG_1 <span class="sc">+</span> DJG_2 <span class="sc">+</span> DJG_3 <span class="sc">+</span> DJG_4 <span class="sc">+</span> DJG_5 <span class="sc">+</span> DJG_6</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"DJG"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["DJG_1"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["djg_total"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"1","4":"0","5":"0","6":"0","7":"3"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"1","7":"2"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"1","7":"3"},{"1":"0","2":"1","3":"1","4":"0","5":"1","6":"0","7":"3"},{"1":"1","2":"1","3":"0","4":"0","5":"1","6":"1","7":"4"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"1","3":"1","4":"1","5":"1","6":"1","7":"5"},{"1":"1","2":"0","3":"1","4":"0","5":"1","6":"0","7":"3"},{"1":"0","2":"0","3":"1","4":"1","5":"0","6":"1","7":"3"},{"1":"1","2":"1","3":"1","4":"1","5":"0","6":"1","7":"5"},{"1":"1","2":"0","3":"1","4":"1","5":"1","6":"1","7":"5"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"1","2":"0","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"1","2":"1","3":"1","4":"1","5":"0","6":"1","7":"5"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"1","2":"1","3":"1","4":"0","5":"1","6":"0","7":"4"},{"1":"1","2":"0","3":"0","4":"0","5":"1","6":"0","7":"2"},{"1":"1","2":"0","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"0","3":"1","4":"1","5":"0","6":"1","7":"3"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"1","7":"3"},{"1":"1","2":"1","3":"0","4":"1","5":"1","6":"1","7":"5"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"0","3":"1","4":"1","5":"1","6":"1","7":"4"},{"1":"1","2":"1","3":"0","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Often, however, we might want to update columns by transforming values within them.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/mutate_2.png" class="img-fluid figure-img" alt="A table is shown with columns x and y. The column y is updated to add 1 to each value by using y = y + 1 within the mutate call"></p>
<p></p><figcaption class="figure-caption">Using mutate to overwrite or update values in a column</figcaption><p></p>
</figure>
</div>
<p>In our data set we have the problem that date times are stored as character vectors rather than date times. This means that we can’t perform any mathematical operations on the values in these columns.</p>
<p>If we try to get the total time participants took in the study like so, it won’t work.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_time =</span> end_time <span class="sc">-</span> start_time) <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"time"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This would also be the case if we wanted to perform a mathematical operation using a numeric and non-numeric column. To fix this, we change the data type.</p>
<p>Let’s update the <code>start_time</code> and <code>end_time</code> columns, converting them to date time data types. We’ll use the <code>lubridate</code> package for this which has the function <code>ymd_hms()</code> which parses character vectors in the format of year-month-day_hours-minutes-seconds to a proper date time data type.</p>
<p>Notice that we can also create a new column, <code>total_time</code> by subtracting <code>start_time</code> from <code>end_time</code> within the same <code>mutate()</code> call that we use to convert their data types. This column goes to the end of our data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">start_time =</span> <span class="fu">ymd_hms</span>(start_time),</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">end_time =</span> <span class="fu">ymd_hms</span>(end_time),</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_time =</span> end_time <span class="sc">-</span> start_time</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"time"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["start_time"],"name":[1],"type":["dttm"],"align":["right"]},{"label":["end_time"],"name":[2],"type":["dttm"],"align":["right"]},{"label":["total_time"],"name":[3],"type":["drtn"],"align":["right"]}],"data":[{"1":"2018-03-22 23:06:11","2":"2018-03-23 00:25:51","3":"1.327778 hours"},{"1":"2018-03-26 00:30:20","2":"2018-03-26 02:15:52","3":"1.758889 hours"},{"1":"2018-03-21 11:09:38","2":"2018-03-21 12:16:28","3":"1.113889 hours"},{"1":"2018-03-25 13:03:58","2":"2018-03-25 14:45:25","3":"1.690833 hours"},{"1":"2018-03-24 06:46:30","2":"2018-03-24 08:17:29","3":"1.516389 hours"},{"1":"2018-03-21 03:23:57","2":"2018-03-21 04:28:01","3":"1.067778 hours"},{"1":"2018-03-25 21:07:24","2":"2018-03-25 22:51:44","3":"1.738889 hours"},{"1":"2018-03-24 18:03:12","2":"2018-03-24 19:38:12","3":"1.583333 hours"},{"1":"2018-03-22 04:16:08","2":"2018-03-22 05:29:05","3":"1.215833 hours"},{"1":"2018-03-23 02:48:32","2":"2018-03-23 04:09:31","3":"1.349722 hours"},{"1":"2018-03-25 23:56:13","2":"2018-03-26 01:41:32","3":"1.755278 hours"},{"1":"2018-03-22 21:17:22","2":"2018-03-22 22:36:24","3":"1.317222 hours"},{"1":"2018-03-26 18:28:33","2":"2018-03-26 20:20:30","3":"1.865833 hours"},{"1":"2018-03-26 01:23:54","2":"2018-03-26 03:09:45","3":"1.764167 hours"},{"1":"2018-03-21 04:15:50","2":"2018-03-21 05:20:13","3":"1.073056 hours"},{"1":"2018-03-24 02:46:45","2":"2018-03-24 04:16:18","3":"1.492500 hours"},{"1":"2018-03-25 03:43:36","2":"2018-03-25 05:21:42","3":"1.635000 hours"},{"1":"2018-03-21 06:16:32","2":"2018-03-21 07:21:37","3":"1.084722 hours"},{"1":"2018-03-24 18:07:05","2":"2018-03-24 19:42:07","3":"1.583889 hours"},{"1":"2018-03-21 19:23:38","2":"2018-03-21 20:33:25","3":"1.163056 hours"},{"1":"2018-03-26 08:15:03","2":"2018-03-26 10:03:21","3":"1.805000 hours"},{"1":"2018-03-22 16:40:33","2":"2018-03-22 17:57:56","3":"1.289722 hours"},{"1":"2018-03-21 04:04:38","2":"2018-03-21 05:08:57","3":"1.071944 hours"},{"1":"2018-03-24 12:08:05","2":"2018-03-24 13:40:59","3":"1.548333 hours"},{"1":"2018-03-25 10:40:49","2":"2018-03-25 12:21:25","3":"1.676667 hours"},{"1":"<NA>","2":"<NA>","3":"NA hours"},{"1":"<NA>","2":"<NA>","3":"NA hours"},{"1":"<NA>","2":"<NA>","3":"NA hours"},{"1":"<NA>","2":"<NA>","3":"NA hours"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>If we don’t like working with decimal hours, we can change the units to minutes using e.g.&nbsp;<code>units(TIBBLE$COL) &lt;- "mins"</code></p>
</div>
</div>
<section id="improving-multi-column-operations" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1" class="anchored" data-anchor-id="improving-multi-column-operations"><span class="header-section-number">3.6.1</span> Improving Multi-Column Operations</h3>
<p>Listing each of the columns we’d like to use when performing operations on the columns can be tedious. Let’s say we want to sum up every value in the DJG columns. How might we do this? You might assume we can use the <code>:</code> operator to select only the columns between <code>DJG_1</code> and <code>DJG_6</code> as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DJG_sum =</span> <span class="fu">sum</span>(DJG_1<span class="sc">:</span>DJG_6)) <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"DJG"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 2 warnings in `mutate()`.
The first warning was:
ℹ In argument: `DJG_sum = sum(DJG_1:DJG_6)`.
Caused by warning in `DJG_1:DJG_6`:
! numerical expression has 29 elements: only the first used
ℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.</code></pre>
</div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["DJG_1"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["DJG_sum"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"1","4":"0","5":"0","6":"0","7":"1"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"1","7":"1"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"1","7":"1"},{"1":"0","2":"1","3":"1","4":"0","5":"1","6":"0","7":"1"},{"1":"1","2":"1","3":"0","4":"0","5":"1","6":"1","7":"1"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"1"},{"1":"0","2":"1","3":"1","4":"1","5":"1","6":"1","7":"1"},{"1":"1","2":"0","3":"1","4":"0","5":"1","6":"0","7":"1"},{"1":"0","2":"0","3":"1","4":"1","5":"0","6":"1","7":"1"},{"1":"1","2":"1","3":"1","4":"1","5":"0","6":"1","7":"1"},{"1":"1","2":"0","3":"1","4":"1","5":"1","6":"1","7":"1"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"1"},{"1":"1","2":"0","3":"1","4":"1","5":"0","6":"1","7":"1"},{"1":"1","2":"1","3":"1","4":"1","5":"0","6":"1","7":"1"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"1"},{"1":"1","2":"1","3":"1","4":"0","5":"1","6":"0","7":"1"},{"1":"1","2":"0","3":"0","4":"0","5":"1","6":"0","7":"1"},{"1":"1","2":"0","3":"1","4":"1","5":"0","6":"1","7":"1"},{"1":"0","2":"0","3":"1","4":"1","5":"0","6":"1","7":"1"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"1","7":"1"},{"1":"1","2":"1","3":"0","4":"1","5":"1","6":"1","7":"1"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"1"},{"1":"0","2":"0","3":"1","4":"1","5":"1","6":"1","7":"1"},{"1":"1","2":"1","3":"0","4":"1","5":"0","6":"1","7":"1"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"1"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"1"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"1"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"1"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>However, we got a warning and very unexpected output. That’s because the <code>sum()</code> function (and others) aren’t set up for row-wise operations. Do to this, we can use the <code>across()</code> function to tell <code>mutate()</code> that we want to perform a row-wise operation. However, <code>c()</code> also doesn’t work as expected here as it doesn’t like the bare or quoted column names we pass to the function. So, we update this to use <code>c_across()</code> to work with the bare column names.</p>
<p>Again, we use <code>select()</code> only to restrict the print output for ease of viewing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DJG_sum =</span> <span class="fu">sum</span>(<span class="fu">c_across</span>(DJG_1<span class="sc">:</span>DJG_6))) <span class="sc">|&gt;</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"DJG"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["DJG_1"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["DJG_sum"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"1","4":"0","5":"0","6":"0","7":"3"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"1","7":"2"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"1","7":"3"},{"1":"0","2":"1","3":"1","4":"0","5":"1","6":"0","7":"3"},{"1":"1","2":"1","3":"0","4":"0","5":"1","6":"1","7":"4"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"1","3":"1","4":"1","5":"1","6":"1","7":"5"},{"1":"1","2":"0","3":"1","4":"0","5":"1","6":"0","7":"3"},{"1":"0","2":"0","3":"1","4":"1","5":"0","6":"1","7":"3"},{"1":"1","2":"1","3":"1","4":"1","5":"0","6":"1","7":"5"},{"1":"1","2":"0","3":"1","4":"1","5":"1","6":"1","7":"5"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"1","2":"0","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"1","2":"1","3":"1","4":"1","5":"0","6":"1","7":"5"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"1","2":"1","3":"1","4":"0","5":"1","6":"0","7":"4"},{"1":"1","2":"0","3":"0","4":"0","5":"1","6":"0","7":"2"},{"1":"1","2":"0","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"0","3":"1","4":"1","5":"0","6":"1","7":"3"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"1","7":"3"},{"1":"1","2":"1","3":"0","4":"1","5":"1","6":"1","7":"5"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"0","3":"1","4":"1","5":"1","6":"1","7":"4"},{"1":"1","2":"1","3":"0","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>We can also use the <code>select()</code> helpers with <code>c_across()</code> to make this even cleaner.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DJG_sum =</span> <span class="fu">sum</span>(<span class="fu">c_across</span>(<span class="fu">contains</span>(<span class="st">"DJG"</span>)))) <span class="sc">|&gt;</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"DJG"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["DJG_1"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["DJG_sum"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"1","4":"0","5":"0","6":"0","7":"3"},{"1":"0","2":"0","3":"0","4":"1","5":"0","6":"1","7":"2"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"1","7":"3"},{"1":"0","2":"1","3":"1","4":"0","5":"1","6":"0","7":"3"},{"1":"1","2":"1","3":"0","4":"0","5":"1","6":"1","7":"4"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"1","3":"1","4":"1","5":"1","6":"1","7":"5"},{"1":"1","2":"0","3":"1","4":"0","5":"1","6":"0","7":"3"},{"1":"0","2":"0","3":"1","4":"1","5":"0","6":"1","7":"3"},{"1":"1","2":"1","3":"1","4":"1","5":"0","6":"1","7":"5"},{"1":"1","2":"0","3":"1","4":"1","5":"1","6":"1","7":"5"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"1","2":"0","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"1","2":"1","3":"1","4":"1","5":"0","6":"1","7":"5"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"1","2":"1","3":"1","4":"0","5":"1","6":"0","7":"4"},{"1":"1","2":"0","3":"0","4":"0","5":"1","6":"0","7":"2"},{"1":"1","2":"0","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"0","3":"1","4":"1","5":"0","6":"1","7":"3"},{"1":"0","2":"1","3":"0","4":"0","5":"1","6":"1","7":"3"},{"1":"1","2":"1","3":"0","4":"1","5":"1","6":"1","7":"5"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"0","3":"1","4":"1","5":"1","6":"1","7":"4"},{"1":"1","2":"1","3":"0","4":"1","5":"0","6":"1","7":"4"},{"1":"0","2":"1","3":"1","4":"1","5":"0","6":"1","7":"4"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="using-conditionals" class="level3" data-number="3.6.2">
<h3 data-number="3.6.2" class="anchored" data-anchor-id="using-conditionals"><span class="header-section-number">3.6.2</span> Using Conditionals</h3>
<p>Finally, we can change only certain values within a column with conditionals.</p>
<p>Here we create a new column <code>z</code>.</p>
<ul>
<li><p>If the value in <code>y</code> is equal to 10, that row in <code>z</code> gets a 1.</p></li>
<li><p>For all other values of <code>y</code> (default, <code>TRUE</code> for everything else), give <code>z</code> a 0.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/mutate_case_when.png" class="img-fluid figure-img" alt="A table is shown with columns x and y. The column z is created by using the mutate call. Crucially, case_when is used here such that when the value of y is 10, z is 1. Otherwise (defaulting to TRUE) the value is set to 0."></p>
<p></p><figcaption class="figure-caption">Creating a new column based on conditional operations on an existing column</figcaption><p></p>
</figure>
</div>
<p>Notice that in our data set we have different impairments (e.g.&nbsp;Vision, Speech) coded as X or NA. We can’t work with these for statistics because they aren’t numbers. But we can fix that using some conditional rules using the <code>case_when()</code> function.</p>
<p><code>case_when()</code> looks for a logical operation, (e.g.&nbsp;when <code>Vision == "X"</code>), when this is <code>TRUE</code> you can set a value to assign to that case after the <code>~</code>. We will set this to <code>1</code>. We can then either specify every other case, or set a default value. In this instance we’ll set a default value where the case evaluation always results in <code>TRUE</code> after checking for the first case (i.e.&nbsp;that <code>Vision == "X"</code>). For all cases other than <code>Vision == "X"</code> we set the value to <code>0</code>.</p>
<p>Again, we use <code>select()</code> only to restrict the print output for ease of viewing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PID, Vision) <span class="sc">|&gt;</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Vision =</span> <span class="fu">case_when</span>(</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>      Vision <span class="sc">==</span> <span class="st">"X"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Vision"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"26","2":"0"},{"1":"27","2":"0"},{"1":"28","2":"1"},{"1":"29","2":"0"},{"1":"30","2":"1"},{"1":"A2","2":"0"},{"1":"A3","2":"0"},{"1":"C","2":"0"},{"1":"D","2":"1"},{"1":"I","2":"0"},{"1":"J","2":"0"},{"1":"K","2":"0"},{"1":"M1","2":"0"},{"1":"M2","2":"0"},{"1":"P","2":"1"},{"1":"R1","2":"1"},{"1":"R2","2":"0"},{"1":"R3","2":"0"},{"1":"S","2":"0"},{"1":"T1","2":"0"},{"1":"T2","2":"1"},{"1":"V","2":"0"},{"1":"W1","2":"0"},{"1":"W2","2":"0"},{"1":"Z","2":"0"},{"1":"NA","2":"0"},{"1":"NA","2":"0"},{"1":"NA","2":"0"},{"1":"NA","2":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="filtering-observations" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="filtering-observations"><span class="header-section-number">3.7</span> Filtering Observations</h2>
<section id="filtering-to-keep" class="level3" data-number="3.7.1">
<h3 data-number="3.7.1" class="anchored" data-anchor-id="filtering-to-keep"><span class="header-section-number">3.7.1</span> Filtering to Keep</h3>
<p>We can subset our data sets by filtering it out to only contain rows where specific conditions are met using the <code>filter()</code> function. In the example below we filter the data set down to rows where <code>x</code> is greater than 1.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/filter.png" class="img-fluid figure-img" alt="A table is shown with columns x, y, and z. Filter is used to keep only rows where the value of x is greater than 1. This results in a subsetted table."></p>
<p></p><figcaption class="figure-caption">Filtering a data set to specific rows</figcaption><p></p>
</figure>
</div>
<p>In our data set, we might subset it to only those who completed the study. Due to inconsistent coding, we have two values for having completed the study in the <code>progress</code> column, <code>FINISH</code> and <code>END</code>. We want to filter the data to people who have <code>progress</code> as <code>FINISH</code> <strong>OR</strong> <code>END</code> (they can’t be both), so we use the <code>|</code> OR operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(progress <span class="sc">==</span> <span class="st">"FINISH"</span> <span class="sc">|</span> progress <span class="sc">==</span> <span class="st">"END"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[19],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[20],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"2018-03-22 23:06:11","3":"2018-03-23 00:25:51","4":"FINISH","5":"M","6":"54","7":"NA","8":"X","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"7","20":"no"},{"1":"28","2":"2018-03-21 11:09:38","3":"2018-03-21 12:16:28","4":"END","5":"F","6":"37","7":"X","8":"NA","9":"X","10":"NA","11":"NA","12":"X","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"yes"},{"1":"A2","2":"2018-03-21 03:23:57","3":"2018-03-21 04:28:01","4":"END","5":"male","6":"39","7":"x","8":"x","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"I","2":"2018-03-23 02:48:32","3":"2018-03-23 04:09:31","4":"END","5":"M","6":"50","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"4","20":"yes"},{"1":"J","2":"2018-03-25 23:56:13","3":"2018-03-26 01:41:32","4":"END","5":"M","6":"46","7":"NA","8":"X","9":"X","10":"NA","11":"NA","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"1","18":"1","19":"3","20":"no"},{"1":"K","2":"2018-03-22 21:17:22","3":"2018-03-22 22:36:24","4":"END","5":"M","6":"55","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"M1","2":"2018-03-26 18:28:33","3":"2018-03-26 20:20:30","4":"END","5":"Female","6":"53","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"5","20":"yes"},{"1":"M2","2":"2018-03-26 01:23:54","3":"2018-03-26 03:09:45","4":"END","5":"F","6":"49","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"P","2":"2018-03-21 04:15:50","3":"2018-03-21 05:20:13","4":"END","5":"F","6":"61","7":"X","8":"X","9":"NA","10":"X","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"6","20":"yes"},{"1":"R1","2":"2018-03-24 02:46:45","3":"2018-03-24 04:16:18","4":"END","5":"F","6":"56","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"1","20":"yes"},{"1":"R2","2":"2018-03-25 03:43:36","3":"2018-03-25 05:21:42","4":"END","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"0","16":"0","17":"1","18":"0","19":"5","20":"no"},{"1":"R3","2":"2018-03-21 06:16:32","3":"2018-03-21 07:21:37","4":"END","5":"F","6":"28","7":"NA","8":"X","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"S","2":"2018-03-24 18:07:05","3":"2018-03-24 19:42:07","4":"END","5":"F","6":"50","7":"NA","8":"NA","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"2","20":"yes"},{"1":"T1","2":"2018-03-21 19:23:38","3":"2018-03-21 20:33:25","4":"END","5":"M","6":"47","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"NA","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"6","20":"yes"},{"1":"T2","2":"2018-03-26 08:15:03","3":"2018-03-26 10:03:21","4":"END","5":"F","6":"24","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"X","13":"1","14":"1","15":"0","16":"1","17":"1","18":"1","19":"5","20":"no"},{"1":"V","2":"2018-03-22 16:40:33","3":"2018-03-22 17:57:56","4":"END","5":"M","6":"68","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"no"},{"1":"W1","2":"2018-03-21 04:04:38","3":"2018-03-21 05:08:57","4":"END","5":"F","6":"33","7":"x","8":"NA","9":"x","10":"x","11":"x","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"1","18":"1","19":"4","20":"no"},{"1":"W2","2":"2018-03-24 12:08:05","3":"2018-03-24 13:40:59","4":"END","5":"M","6":"39","7":"x","8":"x","9":"NA","10":"NA","11":"x","12":"NA","13":"1","14":"1","15":"0","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"Z","2":"2018-03-25 10:40:49","3":"2018-03-25 12:21:25","4":"END","5":"M","6":"64","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"x","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"yes"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>If we have many conditions we want to meet, many OR (<code>|</code>) statements are verbose and can be unwieldy. We can instead use <code>%in%</code> to define the values in <code>progess</code> that we want to keep. This is <code>TRUE</code> if an observation is <strong>in</strong> a value that you provide.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(progress <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"FINISH"</span>, <span class="st">"END"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[19],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[20],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"2018-03-22 23:06:11","3":"2018-03-23 00:25:51","4":"FINISH","5":"M","6":"54","7":"NA","8":"X","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"7","20":"no"},{"1":"28","2":"2018-03-21 11:09:38","3":"2018-03-21 12:16:28","4":"END","5":"F","6":"37","7":"X","8":"NA","9":"X","10":"NA","11":"NA","12":"X","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"yes"},{"1":"A2","2":"2018-03-21 03:23:57","3":"2018-03-21 04:28:01","4":"END","5":"male","6":"39","7":"x","8":"x","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"I","2":"2018-03-23 02:48:32","3":"2018-03-23 04:09:31","4":"END","5":"M","6":"50","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"4","20":"yes"},{"1":"J","2":"2018-03-25 23:56:13","3":"2018-03-26 01:41:32","4":"END","5":"M","6":"46","7":"NA","8":"X","9":"X","10":"NA","11":"NA","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"1","18":"1","19":"3","20":"no"},{"1":"K","2":"2018-03-22 21:17:22","3":"2018-03-22 22:36:24","4":"END","5":"M","6":"55","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"M1","2":"2018-03-26 18:28:33","3":"2018-03-26 20:20:30","4":"END","5":"Female","6":"53","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"5","20":"yes"},{"1":"M2","2":"2018-03-26 01:23:54","3":"2018-03-26 03:09:45","4":"END","5":"F","6":"49","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"P","2":"2018-03-21 04:15:50","3":"2018-03-21 05:20:13","4":"END","5":"F","6":"61","7":"X","8":"X","9":"NA","10":"X","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"6","20":"yes"},{"1":"R1","2":"2018-03-24 02:46:45","3":"2018-03-24 04:16:18","4":"END","5":"F","6":"56","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"1","20":"yes"},{"1":"R2","2":"2018-03-25 03:43:36","3":"2018-03-25 05:21:42","4":"END","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"0","16":"0","17":"1","18":"0","19":"5","20":"no"},{"1":"R3","2":"2018-03-21 06:16:32","3":"2018-03-21 07:21:37","4":"END","5":"F","6":"28","7":"NA","8":"X","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"S","2":"2018-03-24 18:07:05","3":"2018-03-24 19:42:07","4":"END","5":"F","6":"50","7":"NA","8":"NA","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"2","20":"yes"},{"1":"T1","2":"2018-03-21 19:23:38","3":"2018-03-21 20:33:25","4":"END","5":"M","6":"47","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"NA","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"6","20":"yes"},{"1":"T2","2":"2018-03-26 08:15:03","3":"2018-03-26 10:03:21","4":"END","5":"F","6":"24","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"X","13":"1","14":"1","15":"0","16":"1","17":"1","18":"1","19":"5","20":"no"},{"1":"V","2":"2018-03-22 16:40:33","3":"2018-03-22 17:57:56","4":"END","5":"M","6":"68","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"no"},{"1":"W1","2":"2018-03-21 04:04:38","3":"2018-03-21 05:08:57","4":"END","5":"F","6":"33","7":"x","8":"NA","9":"x","10":"x","11":"x","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"1","18":"1","19":"4","20":"no"},{"1":"W2","2":"2018-03-24 12:08:05","3":"2018-03-24 13:40:59","4":"END","5":"M","6":"39","7":"x","8":"x","9":"NA","10":"NA","11":"x","12":"NA","13":"1","14":"1","15":"0","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"Z","2":"2018-03-25 10:40:49","3":"2018-03-25 12:21:25","4":"END","5":"M","6":"64","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"x","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"yes"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>We can combine these with criteria on other columns to do additional sub-setting in one <code>filter()</code> call.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    progress <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"FINISH"</span>, <span class="st">"END"</span>),</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    Age <span class="sc">&gt;</span> <span class="dv">50</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[19],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[20],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"2018-03-22 23:06:11","3":"2018-03-23 00:25:51","4":"FINISH","5":"M","6":"54","7":"NA","8":"X","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"7","20":"no"},{"1":"K","2":"2018-03-22 21:17:22","3":"2018-03-22 22:36:24","4":"END","5":"M","6":"55","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"M1","2":"2018-03-26 18:28:33","3":"2018-03-26 20:20:30","4":"END","5":"Female","6":"53","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"5","20":"yes"},{"1":"P","2":"2018-03-21 04:15:50","3":"2018-03-21 05:20:13","4":"END","5":"F","6":"61","7":"X","8":"X","9":"NA","10":"X","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"6","20":"yes"},{"1":"R1","2":"2018-03-24 02:46:45","3":"2018-03-24 04:16:18","4":"END","5":"F","6":"56","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"1","20":"yes"},{"1":"R2","2":"2018-03-25 03:43:36","3":"2018-03-25 05:21:42","4":"END","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"0","16":"0","17":"1","18":"0","19":"5","20":"no"},{"1":"V","2":"2018-03-22 16:40:33","3":"2018-03-22 17:57:56","4":"END","5":"M","6":"68","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"no"},{"1":"Z","2":"2018-03-25 10:40:49","3":"2018-03-25 12:21:25","4":"END","5":"M","6":"64","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"x","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"yes"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="filtering-to-exclude" class="level3" data-number="3.7.2">
<h3 data-number="3.7.2" class="anchored" data-anchor-id="filtering-to-exclude"><span class="header-section-number">3.7.2</span> Filtering to Exclude</h3>
<p>What if we have conditions we’d like to exclude from our data set rather than keep? We can do the inverse of these operations using <code>!</code>. Here we ask for those whose <code>progress</code> <strong>ISN’T</strong> <code>FINISH</code> or <code>END</code> but who are <strong>over 50</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>progress <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"FINISH"</span>, <span class="st">"END"</span>),</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    Age <span class="sc">&gt;</span> <span class="dv">50</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[19],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[20],"type":["chr"],"align":["left"]}],"data":[{"1":"27","2":"2018-03-26 00:30:20","3":"2018-03-26 02:15:52","4":"no","5":"M","6":"54","7":"NA","8":"X","9":"X","10":"NA","11":"X","12":"NA","13":"0","14":"0","15":"0","16":"1","17":"0","18":"1","19":"6","20":"yes"},{"1":"29","2":"2018-03-25 13:03:58","3":"2018-03-25 14:45:25","4":"ethics","5":"M","6":"51","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"0","17":"1","18":"0","19":"0","20":"no"},{"1":"30","2":"2018-03-24 06:46:30","3":"2018-03-24 08:17:29","4":"ethics","5":"M","6":"52","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"no"},{"1":"C","2":"2018-03-24 18:03:12","3":"2018-03-24 19:38:12","4":"ethics","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"0","17":"1","18":"0","19":"6","20":"no"},{"1":"D","2":"2018-03-22 04:16:08","3":"2018-03-22 05:29:05","4":"NA","5":"M","6":"68","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="a-note-on-missing-values" class="level3" data-number="3.7.3">
<h3 data-number="3.7.3" class="anchored" data-anchor-id="a-note-on-missing-values"><span class="header-section-number">3.7.3</span> A Note on Missing Values</h3>
<p>One thing to bear in mind If you ask R if a value is equal to an <code>NA</code> (an unknown value) it is very literal in that it tells us it can’t know. So, this doesn’t work:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(progress <span class="sc">==</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Instead, we have to use <code>is.na()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(progress))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[19],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[20],"type":["chr"],"align":["left"]}],"data":[{"1":"D","2":"2018-03-22 04:16:08","3":"2018-03-22 05:29:05","4":"NA","5":"M","6":"68","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"7","20":"no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1","20":"no"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"1","20":"yes"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"0","20":"no"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>If we want values that <strong>AREN’T</strong> NAs, then we can combine <code>is.na()</code> and the NOT (<code>!</code>) operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(progress))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["chr"],"align":["left"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[19],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[20],"type":["chr"],"align":["left"]}],"data":[{"1":"26","2":"2018-03-22 23:06:11","3":"2018-03-23 00:25:51","4":"FINISH","5":"M","6":"54","7":"NA","8":"X","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"0","18":"0","19":"7","20":"no"},{"1":"27","2":"2018-03-26 00:30:20","3":"2018-03-26 02:15:52","4":"no","5":"M","6":"54","7":"NA","8":"X","9":"X","10":"NA","11":"X","12":"NA","13":"0","14":"0","15":"0","16":"1","17":"0","18":"1","19":"6","20":"yes"},{"1":"28","2":"2018-03-21 11:09:38","3":"2018-03-21 12:16:28","4":"END","5":"F","6":"37","7":"X","8":"NA","9":"X","10":"NA","11":"NA","12":"X","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"yes"},{"1":"29","2":"2018-03-25 13:03:58","3":"2018-03-25 14:45:25","4":"ethics","5":"M","6":"51","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"0","17":"1","18":"0","19":"0","20":"no"},{"1":"30","2":"2018-03-24 06:46:30","3":"2018-03-24 08:17:29","4":"ethics","5":"M","6":"52","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"0","16":"0","17":"1","18":"1","19":"4","20":"no"},{"1":"A2","2":"2018-03-21 03:23:57","3":"2018-03-21 04:28:01","4":"END","5":"male","6":"39","7":"x","8":"x","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"A3","2":"2018-03-25 21:07:24","3":"2018-03-25 22:51:44","4":"ethics","5":"M","6":"47","7":"NA","8":"NA","9":"X","10":"X","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"1","18":"1","19":"0","20":"no"},{"1":"C","2":"2018-03-24 18:03:12","3":"2018-03-24 19:38:12","4":"ethics","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"0","17":"1","18":"0","19":"6","20":"no"},{"1":"I","2":"2018-03-23 02:48:32","3":"2018-03-23 04:09:31","4":"END","5":"M","6":"50","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"4","20":"yes"},{"1":"J","2":"2018-03-25 23:56:13","3":"2018-03-26 01:41:32","4":"END","5":"M","6":"46","7":"NA","8":"X","9":"X","10":"NA","11":"NA","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"1","18":"1","19":"3","20":"no"},{"1":"K","2":"2018-03-22 21:17:22","3":"2018-03-22 22:36:24","4":"END","5":"M","6":"55","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"1","20":"yes"},{"1":"M1","2":"2018-03-26 18:28:33","3":"2018-03-26 20:20:30","4":"END","5":"Female","6":"53","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"5","20":"yes"},{"1":"M2","2":"2018-03-26 01:23:54","3":"2018-03-26 03:09:45","4":"END","5":"F","6":"49","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"P","2":"2018-03-21 04:15:50","3":"2018-03-21 05:20:13","4":"END","5":"F","6":"61","7":"X","8":"X","9":"NA","10":"X","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"6","20":"yes"},{"1":"R1","2":"2018-03-24 02:46:45","3":"2018-03-24 04:16:18","4":"END","5":"F","6":"56","7":"X","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"1","15":"1","16":"0","17":"1","18":"0","19":"1","20":"yes"},{"1":"R2","2":"2018-03-25 03:43:36","3":"2018-03-25 05:21:42","4":"END","5":"M","6":"53","7":"NA","8":"NA","9":"NA","10":"NA","11":"X","12":"NA","13":"1","14":"0","15":"0","16":"0","17":"1","18":"0","19":"5","20":"no"},{"1":"R3","2":"2018-03-21 06:16:32","3":"2018-03-21 07:21:37","4":"END","5":"F","6":"28","7":"NA","8":"X","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"S","2":"2018-03-24 18:07:05","3":"2018-03-24 19:42:07","4":"END","5":"F","6":"50","7":"NA","8":"NA","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"0","18":"1","19":"2","20":"yes"},{"1":"T1","2":"2018-03-21 19:23:38","3":"2018-03-21 20:33:25","4":"END","5":"M","6":"47","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"NA","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"6","20":"yes"},{"1":"T2","2":"2018-03-26 08:15:03","3":"2018-03-26 10:03:21","4":"END","5":"F","6":"24","7":"X","8":"X","9":"X","10":"X","11":"NA","12":"X","13":"1","14":"1","15":"0","16":"1","17":"1","18":"1","19":"5","20":"no"},{"1":"V","2":"2018-03-22 16:40:33","3":"2018-03-22 17:57:56","4":"END","5":"M","6":"68","7":"NA","8":"X","9":"X","10":"X","11":"X","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"no"},{"1":"W1","2":"2018-03-21 04:04:38","3":"2018-03-21 05:08:57","4":"END","5":"F","6":"33","7":"x","8":"NA","9":"x","10":"x","11":"x","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"1","18":"1","19":"4","20":"no"},{"1":"W2","2":"2018-03-24 12:08:05","3":"2018-03-24 13:40:59","4":"END","5":"M","6":"39","7":"x","8":"x","9":"NA","10":"NA","11":"x","12":"NA","13":"1","14":"1","15":"0","16":"1","17":"0","18":"1","19":"4","20":"no"},{"1":"Z","2":"2018-03-25 10:40:49","3":"2018-03-25 12:21:25","4":"END","5":"M","6":"64","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"x","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"0","20":"yes"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="arranging-data" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="arranging-data"><span class="header-section-number">3.8</span> Arranging Data</h2>
<p>While arguable one of the less important aspects of data transformation, you will sometimes want or need to arrange your data in a specific order. To do this, we can arrange rows sorted by value in a column using <code>arrange()</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/arrange.png" class="img-fluid figure-img" alt="A table is shown with columns x, y, and z. x contains values 2, 1, and 3. Using arrange and passing the column name x means that the data is now sorted so x goes 1, 2, 3."></p>
<p></p><figcaption class="figure-caption">Arranging data by sorting all rows by values in a specific column</figcaption><p></p>
</figure>
</div>
<p>This defaults to an ascending order, but we can use <code>desc()</code> to enforce a descending order. Compare the default and <code>desc()</code> versions below.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Age) <span class="sc">|&gt;</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Age"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"24"},{"1":"28"},{"1":"33"},{"1":"37"},{"1":"39"},{"1":"39"},{"1":"46"},{"1":"47"},{"1":"47"},{"1":"49"},{"1":"50"},{"1":"50"},{"1":"51"},{"1":"52"},{"1":"53"},{"1":"53"},{"1":"53"},{"1":"54"},{"1":"54"},{"1":"55"},{"1":"56"},{"1":"61"},{"1":"64"},{"1":"68"},{"1":"68"},{"1":"NA"},{"1":"NA"},{"1":"NA"},{"1":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Age) <span class="sc">|&gt;</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Age))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Age"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"68"},{"1":"68"},{"1":"64"},{"1":"61"},{"1":"56"},{"1":"55"},{"1":"54"},{"1":"54"},{"1":"53"},{"1":"53"},{"1":"53"},{"1":"52"},{"1":"51"},{"1":"50"},{"1":"50"},{"1":"49"},{"1":"47"},{"1":"47"},{"1":"46"},{"1":"39"},{"1":"39"},{"1":"37"},{"1":"33"},{"1":"28"},{"1":"24"},{"1":"NA"},{"1":"NA"},{"1":"NA"},{"1":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="summarising-data" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="summarising-data"><span class="header-section-number">3.9</span> Summarising Data</h2>
<p>One very important aspect of data analysis is presenting descriptive statistics, or summaries of your data. Often this will be counts, measures of central tendency (such as the mean, median, or mode) and measures of dispersion (such as standard deviation, interquartile range, etc.). To produce these summaries we can use the <code>summarise()</code> function.</p>
<p>Here, we create a new table with a new column which is the result of a mathematical operation on every value in the original table of data.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/summarise.png" class="img-fluid figure-img" alt="A table is shown with values x, y, and z. x contains values 1, 2, and 3. Using summarise and passing the code sum_x = sum(x) means that the values of x are summed up and a new table is produced with the heading sum_x."></p>
<p></p><figcaption class="figure-caption">Summarising values in a data set</figcaption><p></p>
</figure>
</div>
<p>Let’s look at getting an idea of some very basic descriptive statistics for the demographics in our data set. We’ll create a new table which contains the mean of ages in our data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">age_mean =</span> <span class="fu">mean</span>(Age))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["age_mean"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>However, by default this results in an error. That’s because <code>mean()</code> can’t compute a mean of numeric values and something that doesn’t exist <code>NA</code>. Instead, we can tell <code>mean()</code> to explicitly ignore <code>NA</code>s in the computation. We can do this as follows.</p>
<section id="handling-missing-values" class="level3" data-number="3.9.1">
<h3 data-number="3.9.1" class="anchored" data-anchor-id="handling-missing-values"><span class="header-section-number">3.9.1</span> Handling Missing Values</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>Either within each operation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_mean =</span> </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["age_mean"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"49.24"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>Or within the chain of functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Age) <span class="sc">|&gt;</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_mean =</span> <span class="fu">mean</span>(Age)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["age_mean"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"49.24"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note <code>drop_na()</code> only keeps complete rows if several columns are provided.</p>
</div>
</div>
<p>We can create many columns within our new summary table made up of operations on our original data. Here, we will create a mean and standard deviation for age along with a count of the number of observations we have in the data set (excluding <code>NA</code>s) using <code>n().</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(Age) <span class="sc">|&gt;</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_mean =</span> <span class="fu">mean</span>(Age),</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_sd =</span> <span class="fu">sd</span>(Age),</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["age_mean"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["age_sd"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"49.24","2":"11.12535","3":"25"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="grouped-operations" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="grouped-operations"><span class="header-section-number">3.10</span> Grouped Operations</h2>
<p>Often we might want to have these summaries made up for specific groups within our data set. We can perform grouped operations using many of the <code>tidyverse</code> functions. For example, we can sum up values for one column for each unique value in another column using <code>group_by()</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/group_by_summarise.png" class="img-fluid figure-img" alt="A table is shown with columns x, y, and z. X contains the unique values A and B across several rows. By grouping by x before summarising we get a table with the grouping ID and summaries for each group."></p>
<p></p><figcaption class="figure-caption">Grouping by unique values in one column to produce a summary from another column</figcaption><p></p>
</figure>
</div>
<p>We pass to <code>group_by()</code> the name of the column containing our groups, and then proceed with our <code>summary()</code> function (or others) to perform the grouped operation. Let’s get the mean ages for each gender in our study.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Gender) <span class="sc">|&gt;</span> </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">age_mean =</span> <span class="fu">mean</span>(Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Gender"],"name":[1],"type":["chr"],"align":["left"]},{"label":["age_mean"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"F","2":"42.25"},{"1":"Female","2":"53.00"},{"1":"M","2":"53.40"},{"1":"male","2":"39.00"},{"1":"NA","2":"NaN"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>We have the grouped ages, but we have some coding issues in our data. We probably wan’t consistent labels for men and women, rather than splitting them across <code>male/M</code> and <code>Female/F</code>. We should fix this ahead of time using a conditional in <code>mutate()</code>.</p>
<section id="group_by-with-other-dplyr-functions" class="level3" data-number="3.10.1">
<h3 data-number="3.10.1" class="anchored" data-anchor-id="group_by-with-other-dplyr-functions"><span class="header-section-number">3.10.1</span> <code>group_by()</code> with other <code>dplyr</code> functions</h3>
<p><code>group_by()</code> works with a whole host of functions from <code>dplyr</code> including <code>filter()</code>, <code>mutate()</code> and others. To see how this might work, let’s filter our data to the earliest observation in <code>start_time</code> within each level of <code>Gender</code>. We’ll use the <code>rank()</code> function to rank order the <code>start_time</code> variable within each gender, and keep only the observations where rank is equal to 1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">start_time =</span> <span class="fu">ymd_hms</span>(start_time)) <span class="sc">|&gt;</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Gender) <span class="sc">|&gt;</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">rank</span>(start_time) <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["PID"],"name":[1],"type":["chr"],"align":["left"]},{"label":["start_time"],"name":[2],"type":["dttm"],"align":["right"]},{"label":["end_time"],"name":[3],"type":["chr"],"align":["left"]},{"label":["progress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Gender"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Age"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Vision"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Speech"],"name":[8],"type":["chr"],"align":["left"]},{"label":["Motor"],"name":[9],"type":["chr"],"align":["left"]},{"label":["Memory"],"name":[10],"type":["chr"],"align":["left"]},{"label":["Cognitive"],"name":[11],"type":["chr"],"align":["left"]},{"label":["Pain"],"name":[12],"type":["chr"],"align":["left"]},{"label":["DJG_1"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["DJG_2"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["DJG_3"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DJG_4"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["DJG_5"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["DJG_6"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["enjoyment"],"name":[19],"type":["chr"],"align":["left"]},{"label":["follow_up"],"name":[20],"type":["chr"],"align":["left"]}],"data":[{"1":"A2","2":"2018-03-21 03:23:57","3":"2018-03-21 04:28:01","4":"END","5":"male","6":"39","7":"x","8":"x","9":"x","10":"NA","11":"NA","12":"NA","13":"0","14":"1","15":"1","16":"1","17":"0","18":"1","19":"5","20":"no"},{"1":"M1","2":"2018-03-26 18:28:33","3":"2018-03-26 20:20:30","4":"END","5":"Female","6":"53","7":"NA","8":"NA","9":"NA","10":"X","11":"X","12":"NA","13":"1","14":"0","15":"1","16":"1","17":"0","18":"1","19":"5","20":"yes"},{"1":"T1","2":"2018-03-21 19:23:38","3":"2018-03-21 20:33:25","4":"END","5":"M","6":"47","7":"x","8":"NA","9":"NA","10":"x","11":"x","12":"NA","13":"0","14":"1","15":"0","16":"0","17":"1","18":"1","19":"6","20":"yes"},{"1":"W1","2":"2018-03-21 04:04:38","3":"2018-03-21 05:08:57","4":"END","5":"F","6":"33","7":"x","8":"NA","9":"x","10":"x","11":"x","12":"NA","13":"0","14":"0","15":"1","16":"1","17":"1","18":"1","19":"4","20":"no"},{"1":"NA","2":"<NA>","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"7","20":"no"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Great, we pulled out one value for each label in our data!</p>
</section>
<section id="ungrouping" class="level3" data-number="3.10.2">
<h3 data-number="3.10.2" class="anchored" data-anchor-id="ungrouping"><span class="header-section-number">3.10.2</span> Ungrouping</h3>
<p>If you want to perform further operations on the whole data set after your grouped operations, you need to remember to ungroup. Otherwise, your results might not be as expected. Compare the two outputs below.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p>Without ungrouping.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">start_time =</span> </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ymd_hms</span>(start_time)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Gender) <span class="sc">|&gt;</span> </span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">rank</span>(start_time) <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_age =</span> <span class="fu">mean</span>(</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>      Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Gender"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mean_age"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"F","2":"33"},{"1":"Female","2":"53"},{"1":"M","2":"47"},{"1":"male","2":"39"},{"1":"NA","2":"NaN"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>With ungrouping.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>raw_data <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="#cb49-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb49-3"><a href="#cb49-3"></a>    <span class="at">start_time =</span> </span>
<span id="cb49-4"><a href="#cb49-4"></a>      <span class="fu">ymd_hms</span>(start_time)</span>
<span id="cb49-5"><a href="#cb49-5"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb49-6"><a href="#cb49-6"></a>  <span class="fu">group_by</span>(Gender) <span class="sc">|&gt;</span> </span>
<span id="cb49-7"><a href="#cb49-7"></a>  <span class="fu">filter</span>(<span class="fu">rank</span>(start_time) <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb49-8"><a href="#cb49-8"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb49-9"><a href="#cb49-9"></a>  <span class="fu">summarise</span>(</span>
<span id="cb49-10"><a href="#cb49-10"></a>    <span class="at">mean_age =</span> <span class="fu">mean</span>(</span>
<span id="cb49-11"><a href="#cb49-11"></a>      Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb49-12"><a href="#cb49-12"></a>    )</span>
<span id="cb49-13"><a href="#cb49-13"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["mean_age"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"43"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="chaining-functions" class="level2" data-number="3.11">
<h2 data-number="3.11" class="anchored" data-anchor-id="chaining-functions"><span class="header-section-number">3.11</span> Chaining Functions</h2>
<p>We’ve seen already how we can chain many functions together using the pipe. We can combine all functions we’ve covered to do all our data transformation. We can even pipe the result of these chains into <code>ggplot()</code> calls. In the <a href="#sec-exercises"><span>Section&nbsp;3.13</span></a> we’ll do this, fixing all of the problems with our data before we produce any summaries or plots using the functions you’ve learned about in this chapter.</p>
</section>
<section id="saving-files" class="level2" data-number="3.12">
<h2 data-number="3.12" class="anchored" data-anchor-id="saving-files"><span class="header-section-number">3.12</span> Saving Files</h2>
<p>Finally, once you’re done cleaning your data and making summaries you can save it using the <code>write_*()</code> family of functions. There are the same number of <code>write_*()</code> functions corresponding to the <code>read_*()</code> functions listed above for each package. I suggest saving to a <strong>.csv</strong> file with <code>write_csv()</code> as any program can open .csv files. As mentioned earlier, it’s a good idea to keep your raw and cleaned data apart from one another, even in separate sub-folders. Here we save our data to the “cleaned_data” sub-folder. We should probably do this on actually cleaned data, but this is just an example. You will do this properly in <a href="#sec-exercises"><span>Section&nbsp;3.13</span></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(raw_data, <span class="fu">here</span>(<span class="st">"cleaned_data"</span>, <span class="st">"bi_loneliness.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sec-exercises" class="level2" data-number="3.13">
<h2 data-number="3.13" class="anchored" data-anchor-id="sec-exercises"><span class="header-section-number">3.13</span> Exercises</h2>
<p>Please complete the exercises at <a href="https://github.com/gpwilliams/ds-psych_course" class="uri">https://github.com/gpwilliams/ds-psych_course</a>.</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>I did the statistical analysis for this paper and ensured that I created more problems in the data for this book than actually existed in the data set. This allows us to show off common problems and how to fix them. Therefore, this example data set does not reflect the quality of the research or data handling practices in the project and paper.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02_creating-graphs.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Creating Graphs</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04_tidying-and-merging-data.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Tidying and Merging Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center"><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
  </div>
</footer>



</body></html>